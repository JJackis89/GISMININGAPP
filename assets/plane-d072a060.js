import{aE as _,cV as x}from"./index-f00bd99f.js";import{H as h,c as O,A as p,P as M,_ as H,g as R,u as v}from"./vec32-6757f7c3.js";import{r as $,c as D}from"./vectorStacks-5954743a.js";function b(I=c){return[I[0],I[1],I[2],I[3]]}function k(I=c[0],n=c[1],r=c[2],N=c[3]){return L(I,n,r,N,$.get())}function d(I,n){return L(n[0],n[1],n[2],n[3],I)}function B(I){return I}function L(I,n,r,N,u=b()){return u[0]=I,u[1]=n,u[2]=r,u[3]=N,u}function V(I,n,r){const N=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],u=Math.abs(N-1)>1e-5&&N>1e-12?1/Math.sqrt(N):1;return r[0]=n[0]*u,r[1]=n[1]*u,r[2]=n[2]*u,r[3]=-(r[0]*I[0]+r[1]*I[1]+r[2]*I[2]),r}function j(I,n,r,N=b()){const u=r[0]-n[0],o=r[1]-n[1],E=r[2]-n[2],t=I[0]-n[0],P=I[1]-n[1],X=I[2]-n[2],U=o*X-E*P,C=E*t-u*X,A=u*P-o*t,F=U*U+C*C+A*A,g=Math.abs(F-1)>1e-5&&F>1e-12?1/Math.sqrt(F):1;return N[0]=U*g,N[1]=C*g,N[2]=A*g,N[3]=-(N[0]*I[0]+N[1]*I[1]+N[2]*I[2]),N}function w(I,n,r,N=0,u=Math.floor(r*(1/3)),o=Math.floor(r*(2/3))){if(r<3)return!1;n(S,N);let E=u,t=!1;for(;E<r-1&&!t;)n(f,E),E++,t=!h(S,f);if(!t)return!1;for(E=Math.max(E,o),t=!1;E<r&&!t;)n(i,E),E++,O(a,S,f),p(a,a),O(s,f,i),p(s,s),t=!h(S,i)&&!h(f,i)&&Math.abs(M(a,s))<y;return t?(j(S,f,i,I),!0):(N!==0||u!==1||o!==2)&&w(I,n,r,0,1,2)}const y=.99619469809,S=_(),f=_(),i=_(),a=_(),s=_();function G(I,n,r){return n!==I&&d(I,n),I[3]=-M(I,r),I}function J(I,n,r,N){return H(i,n,I),V(r,i,N)}function Q(I,n,r){return n!=null&&l(m(I,n.origin,n.direction,K,r))}function II(I,n,r){return l(m(I,n.origin,n.vector,e.NONE,r))}function nI(I,n,r){return l(m(I,n.origin,n.vector,e.CLAMP,r))}function rI(I,n){return q(I,n)>=0}function NI(I,n,r){const N=R(D.get(),I,-I[3]),u=z(I,O(D.get(),n,N),D.get());return v(r,u,N),r}function z(I,n,r){const N=R(D.get(),I,M(I,n));return O(r,n,N),r}function q(I,n){return M(I,n)+I[3]}var T;function l(I){return I===T.INTERSECTS_INSIDE_OUT||I===T.INTERSECTS_OUTSIDE_IN}function m(I,n,r,N,u){const o=M(I,r),E=q(I,n);if(o===0)return E>=0?T.INSIDE:T.OUTSIDE;let t=-E/o;return N&e.CLAMP&&(t=x(t,0,1)),!(N&e.INFINITE_MIN)&&t<0||!(N&e.INFINITE_MAX)&&t>1?E>=0?T.INSIDE:T.OUTSIDE:(v(u,n,R(u,r,t)),E>=0?T.INTERSECTS_INSIDE_OUT:T.INTERSECTS_OUTSIDE_IN)}(function(I){I[I.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",I[I.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",I[I.INSIDE=2]="INSIDE",I[I.OUTSIDE=3]="OUTSIDE"})(T||(T={}));const c=[0,0,1,0];var e;(function(I){I[I.NONE=0]="NONE",I[I.CLAMP=1]="CLAMP",I[I.INFINITE_MIN=4]="INFINITE_MIN",I[I.INFINITE_MAX=8]="INFINITE_MAX"})(e||(e={}));e.INFINITE_MIN|e.INFINITE_MAX;const K=e.INFINITE_MAX;export{k as D,NI as H,b as M,B as O,J as P,L as U,d as h,Q as q,w as v,nI as w,II as x,G as y,rI as z};
