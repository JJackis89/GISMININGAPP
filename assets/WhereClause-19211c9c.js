import{bE as wl,hW as R,iM as K,iL as J,iS as Il,iT as et,iU as tt,cX as Y,d_ as H,iV as ge,e8 as G,bW as gl,iW as yl,ad as Tl,hX as Nl}from"./index-8ee34b61.js";var p;(function(a){a.InvalidFunctionParameters="InvalidFunctionParameters",a.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",a.UnsupportedSqlFunction="UnsupportedSqlFunction",a.UnsupportedOperator="UnsupportedOperator",a.UnsupportedSyntax="UnsupportedSyntax",a.UnsupportedIsRhs="UnsupportedIsRhs",a.UnsupportedIsLhs="UnsupportedIsLhs",a.InvalidDataType="InvalidDataType",a.CannotCastValue="CannotCastValue",a.FunctionNotRecognized="FunctionNotRecognized",a.InvalidTime="InvalidTime",a.InvalidParameterCount="InvalidParameterCount",a.InvalidTimeStamp="InvalidTimeStamp",a.InvalidDate="InvalidDate",a.InvalidOperator="InvalidOperator",a.IllegalInterval="IllegalInterval",a.YearMonthIntervals="YearMonthIntervals",a.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",a.MissingStatisticParameters="MissingStatisticParameters"})(p||(p={}));const Ol={[p.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[p.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[p.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[p.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[p.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[p.UnsupportedOperator]:"Unsupported operator - {operator}",[p.UnsupportedSyntax]:"Unsupported syntax - {node}",[p.UnsupportedSqlFunction]:"Sql function not found = {function}",[p.InvalidDataType]:"Invalid sql data type",[p.InvalidDate]:"Invalid date encountered",[p.InvalidOperator]:"Invalid operator encountered",[p.InvalidTime]:"Invalid time encountered",[p.IllegalInterval]:"Illegal interval",[p.FunctionNotRecognized]:"Function not recognized",[p.InvalidTimeStamp]:"Invalid timestamp encountered",[p.InvalidParameterCount]:"Invalid parameter count for call to {name}",[p.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[p.YearMonthIntervals]:"Year-Month Intervals not supported",[p.CannotCastValue]:"Cannot cast value to the required data type"};let h=class Dn extends Error{constructor(o,t){super(wl(Ol[o],t)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,Dn)}};function wn(a){return Number.isNaN(a)||a===0?a:Math.trunc(a)}const In="esri.core.sql.SqlTimeStampOffset";let te=class pe{constructor(o){this._timeStampOffset=o,this.declaredRootClass=In,this._date=null}static isTimestampOffset(o){return typeof o=="object"&&o!=null&&"declaredRootClass"in o&&o.declaredRootClass===In}toDateTime(){return this._date??(this._date=R.fromISO(this._timeStampOffset,{setZone:!0})),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return wn(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return wn(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return pe.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(o){return new pe(R.fromJSDate(o).toISO({includeOffset:!0}))}static fromDateTime(o){return new pe(o.toISO({includeOffset:!0}))}static fromParts(o,t,s=0,f=0,v=0,y=0,T=0,$=!1,b=0,D=0){const Z=`${o.toString().padStart(4,"0")}-${t.toString().padStart(2,"0")}-${s.toString().padStart(2,"0")}`;let E="";y<10&&(E="0");let C=`${f.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}:${E+y.toString()}`;T!==0&&(C+="."+T.toString().padStart(3,"0"));const j=`${$?"-":"+"}${b.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`;return new pe(Z+"T"+C+j)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let o=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return o&&(o=o.replace(".000","")),o}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(o){const t=this.toDateTime().plus(o);return pe.fromDateTime(t)}};function $l(a,o){const t=Mn[a.toLowerCase()];if(t==null)throw new h(p.FunctionNotRecognized);if(o.length<t.minParams||o.length>t.maxParams)throw new h(p.InvalidParameterCount,{name:a.toUpperCase()});return t.evaluate(o)}function gn(a,o){const t=Mn[a.toLowerCase()];return t!=null&&o>=t.minParams&&o<=t.maxParams}const Mn={min:{minParams:1,maxParams:1,evaluate:a=>yn(a[0],"min")},max:{minParams:1,maxParams:1,evaluate:a=>yn(a[0],"max")},avg:{minParams:1,maxParams:1,evaluate:a=>_n(a[0])},sum:{minParams:1,maxParams:1,evaluate:a=>Sl(a[0])},stddev:{minParams:1,maxParams:1,evaluate:a=>xl(a[0])},count:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:a[0].length},var:{minParams:1,maxParams:1,evaluate:a=>bn(a[0])}};function _n(a){if(a===null)return null;let o=0,t=0;for(let s=0;s<a.length;s++){const f=a[s];if(f!==null){if(!ft(f))throw new h(p.InvalidValueForAggregateFunction);t++,o+=f}}return t===0?null:o/a.length}function ft(a){return typeof a=="number"}function yn(a,o){if(a===null)return null;let t=null,s=null;for(const f of a){let v=f;v=K.isDateOnly(f)||J.isTimeOnly(f)?f.toNumber():R.isDateTime(f)?f.toMillis():te.isTimestampOffset(f)?f.toMilliseconds():f,(t===null||o==="max"&&s!==null&&v!==null&&s<=v||o==="min"&&s!==null&&v!==null&&s>=v)&&(t=f,s=v)}return t}function Sl(a){if(a===null)return null;let o=0;for(let t=0;t<a.length;t++){const s=a[t];if(s!==null){if(!ft(s))throw new h(p.InvalidValueForAggregateFunction);o+=s}}return o}function xl(a){if(a===null)return null;const o=bn(a);return o===null?null:Math.sqrt(o)}function bn(a){if(a===null||(a=a.filter(s=>s!==null)).length===0)return null;const o=_n(a);if(o===null)return null;let t=0;for(const s of a){if(!ft(s))throw new h(p.InvalidValueForAggregateFunction);t+=(o-s)**2}return t/(a.length-1)}function nt(a){if(a.precision!==null||a.secondary!==null)throw new h(p.PrimarySecondaryQualifiers)}function Ve(a,o){if(o.includes(".")){const t=o.split(".");a.second=parseFloat(t[0]),a.millis=parseInt(t[1],10)}else a.second=parseFloat(o)}const Tn="esri.core.sql.SqlInterval";class U{constructor(){this.declaredRootClass=Tn,this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static isInterval(o){return typeof o=="object"&&o!=null&&"declaredRootClass"in o&&o.declaredRootClass===Tn}static createFromMilliseconds(o){const t=new U;return t.second=o/1e3,t}static createFromValueAndQualifier(o,t,s){let f=null;const v=new U;if(v.op=s==="-"?"-":"+",t.type==="interval-period"){nt(t);const y=new RegExp("^[0-9]{1,}$");if(t.period==="year"||t.period==="month")throw new h(p.YearMonthIntervals);if(t.period==="second"){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(o))throw new h(p.IllegalInterval);Ve(v,o)}else{if(!y.test(o))throw new h(p.IllegalInterval);v[t.period]=parseFloat(o)}}else{if(nt(t.start),nt(t.end),t.start.period==="year"||t.start.period==="month"||t.end.period==="year"||t.end.period==="month")throw new h(p.YearMonthIntervals);switch(t.start.period){case"day":switch(t.end.period){case"hour":if(f=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!f.test(o))throw new h(p.IllegalInterval);v[t.start.period]=parseFloat(o.split(" ")[0]),v[t.end.period]=parseFloat(o.split(" ")[1]);break;case"minute":if(f=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!f.test(o))throw new h(p.IllegalInterval);{v[t.start.period]=parseFloat(o.split(" ")[0]);const y=o.split(" ")[1].split(":");v.hour=parseFloat(y[0]),v.minute=parseFloat(y[1])}break;case"second":if(f=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!f.test(o))throw new h(p.IllegalInterval);{v[t.start.period]=parseFloat(o.split(" ")[0]);const y=o.split(" ")[1].split(":");v.hour=parseFloat(y[0]),v.minute=parseFloat(y[1]),Ve(v,y[2])}break;default:throw new h(p.IllegalInterval)}break;case"hour":switch(t.end.period){case"minute":if(f=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!f.test(o))throw new h(p.IllegalInterval);v.hour=parseFloat(o.split(":")[0]),v.minute=parseFloat(o.split(":")[1]);break;case"second":if(f=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!f.test(o))throw new h(p.IllegalInterval);{const y=o.split(":");v.hour=parseFloat(y[0]),v.minute=parseFloat(y[1]),Ve(v,y[2])}break;default:throw new h(p.IllegalInterval)}break;case"minute":if(t.end.period!=="second")throw new h(p.IllegalInterval);if(f=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!f.test(o))throw new h(p.IllegalInterval);{const y=o.split(":");v.minute=parseFloat(y[0]),Ve(v,y[1])}break;default:throw new h(p.IllegalInterval)}}return v}valueInMilliseconds(){return(this.op==="-"?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}const El=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,Cl=/^(\d{1,2}):(\d{1,2})$/,Dl=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,Fn=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Ml=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,_l=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,bl=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|-)(\d{1,2}):(\d{1,2})$/,Fl=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function qe(a,o){if(o instanceof Il)return o===et.instance?R.fromMillis(a.getTime(),{zone:et.instance}):R.fromJSDate(a,{zone:o});switch(o){case"system":case"local":case null:return R.fromJSDate(a);default:return o?.toLowerCase()==="unknown"?R.fromMillis(a.getTime(),{zone:et.instance}):R.fromJSDate(a,{zone:o})}}function ae(a){return U.isInterval(a)}function F(a){return R.isDateTime(a)}function A(a){return K.isDateOnly(a)}function L(a){return J.isTimeOnly(a)}function P(a){return te.isTimestampOffset(a)}function He(a){let o=El.exec(a);if(o!==null){const[,t,s,f]=o,v=J.fromParts(parseInt(t,10),parseInt(s,10),parseInt(f,10),0);if(v!==null)return v;throw new h(p.InvalidTime)}if(o=Cl.exec(a),o!==null){const[,t,s]=o,f=J.fromParts(parseInt(t,10),parseInt(s,10),0,0);if(f!==null)return f;throw new h(p.InvalidTime)}if(o=Dl.exec(a),o!==null){const[,t,s,f,v]=o,y=J.fromParts(parseInt(t,10),parseInt(s,10),parseInt(f,10),parseInt(v,10));if(y!==null)return y;throw new h(p.InvalidTime)}throw new h(p.InvalidTime)}function Ne(a,o,t=!1){let s=Ml.exec(a);if(s!==null){const[,f,v,y,T,$,b,D]=s,Z=R.fromObject({year:parseInt(f,10),month:parseInt(v,10),day:parseInt(y,10),hour:parseInt(T,10),minute:parseInt($,10),second:parseInt(b,10),millisecond:D?parseInt(D.replace(".",""),10):0},{zone:tt(o)});if(Z.isValid===!1)throw new h(p.InvalidTimeStamp);return Z}if(s=_l.exec(a),s!==null){const[,f,v,y,T,$,b,D,Z,E,C]=s,j=te.fromParts(parseInt(f,10),parseInt(v,10),parseInt(y,10),parseInt(T,10),parseInt($,10),parseInt(b,10),D?parseInt(D.replace(".",""),10):0,Z==="-",parseInt(E,10),parseInt(C,10));if(j.isValid===!1)throw new h(p.InvalidTimeStamp);return j}if(s=bl.exec(a),s!==null){const[,f,v,y,T,$,b,D,Z]=s,E=te.fromParts(parseInt(f,10),parseInt(v,10),parseInt(y,10),parseInt(T,10),parseInt($,10),0,0,b==="-",parseInt(D,10),parseInt(Z,10));if(E.isValid===!1)throw new h(p.InvalidTimeStamp);return E}if(s=Fl.exec(a),s!==null){const[,f,v,y,T,$]=s,b=R.fromObject({year:parseInt(f,10),month:parseInt(v,10),day:parseInt(y,10),hour:parseInt(T,10),minute:parseInt($,10),second:0},{zone:tt(o)});if(b.isValid===!1)throw new h(p.InvalidTimeStamp);return b}if(s=Fn.exec(a),s!==null){const[,f,v,y]=s,T=R.fromObject({year:parseInt(f,10),month:parseInt(v,10),day:parseInt(y,10),hour:0,minute:0,second:0},{zone:tt(o)});if(T.isValid===!1)throw new h(p.InvalidTimeStamp);return T}throw new h(p.InvalidTimeStamp)}function dt(a,o){const t=Fn.exec(a);if(t===null)try{return Ne(a,o)}catch{throw new h(p.InvalidDate)}const[,s,f,v]=t,y=K.fromParts(parseInt(s,10),parseInt(f,10),parseInt(v,10));if(y===null)throw new h(p.InvalidDate);return y}const Al=321408e5,Pl=26784e5,Ll=864e5,Rl=36e5,Ul=6e4;function rt(a){return!!F(a)||!!P(a)}function at(a){return!!F(a)||!!A(a)||!!P(a)||!!L(a)}function ke(a){if(F(a))return a.toMillis();if(A(a))return a.toNumber();if(P(a))return a.toMilliseconds();throw new h(p.InvalidDataType)}function W(a,o,t){if(a==null||o==null)return null;if(Y(a)){if(Y(o))return ee(a,o,t);if(H(o))return Vl(a,o,t);if(at(o))throw new h(p.InvalidOperator);if(A(o))throw new h(p.InvalidOperator)}else if(H(a)){if(Y(o))return kl(a,o,t);if(H(o))return zl(a,o,t);if(F(o))throw new h(p.InvalidOperator);if(A(o))throw new h(p.InvalidOperator);if(L(o))throw new h(p.InvalidOperator);if(P(o))throw new h(p.InvalidOperator)}else if(F(a)){if(rt(o)){if(ge(a.zone)){if(R.isDateTime(o)&&!ge(o.zone)||te.isTimestampOffset(o))return ye(a,o,t)}else if(R.isDateTime(o)&&ge(o.zone)&&(!ge(a.zone)||te.isTimestampOffset(a)))return ye(a,o,t);return ee(ke(a),ke(o),t)}if(H(o))throw new h(p.InvalidOperator);if(A(o))return ql(a,o,t);if(L(o))throw new h(p.InvalidOperator);if(Y(o))throw new h(p.InvalidOperator)}else if(A(a)){if(P(o))return jl(a,o,t);if(F(o))return Zl(a,o,t);if(H(o))throw new h(p.InvalidOperator);if(A(o))return ee(a.toNumber(),o.toNumber(),t);if(L(o))throw new h(p.InvalidOperator);if(Y(o))throw new h(p.InvalidOperator)}else if(L(a)){if(L(o))return ee(a.toNumber(),o.toNumber(),t);if(H(o))throw new h(p.InvalidOperator);if(Y(o))throw new h(p.InvalidOperator);if(A(o))throw new h(p.InvalidOperator);if(rt(o))throw new h(p.InvalidOperator)}else if(P(a)){if(rt(o))return R.isDateTime(o)&&ge(o.zone)?ye(a,o,t):ee(ke(a),ke(o),t);if(H(o))throw new h(p.InvalidOperator);if(A(o))return Hl(a,o,t);if(L(o))throw new h(p.InvalidOperator);if(Y(o))throw new h(p.InvalidOperator)}switch(t){case"<>":return a!==o;case"=":return a===o;case">":return a>o;case"<":return a<o;case">=":return a>=o;case"<=":return a<=o}}function ee(a,o,t){switch(t){case"<>":return a!==o;case"=":return a===o;case">":return a>o;case"<":return a<o;case">=":return a>=o;case"<=":return a<=o}}function Vl(a,o,t){const s=parseFloat(o);if(!isNaN(s))return ee(a,s,t);const f=a.toString();switch(t){case"<>":return f!==o;case"=":return f===o;case">":return f>o;case"<":return f<o;case">=":return f>=o;case"<=":return f<=o}}function kl(a,o,t){const s=parseFloat(a);if(!isNaN(s))return ee(s,o,t);const f=o.toString();switch(t){case"<>":return a!==f;case"=":return a===f;case">":return a>f;case"<":return a<f;case">=":return a>=f;case"<=":return a<=f}}function zl(a,o,t){switch(t){case"<>":return a!==o;case"=":return a===o;case">":return a>o;case"<":return a<o;case">=":return a>=o;case"<=":return a<=o}}function ql(a,o,t){const s=o.toDateTimeLuxon(a.zone);return ee((a=a.startOf("day")).toMillis(),s.toMillis(),t)}function Hl(a,o,t){const s=o.toDateTimeLuxon(a.toDateTime().zone);return ee((a=a.startOfDay()).toMilliseconds(),s.toMillis(),t)}function Zl(a,o,t){const s=a.toDateTimeLuxon(o.zone);return o=o.startOf("day"),ee(s.toMillis(),o.toMillis(),t)}function jl(a,o,t){const s=a.toDateTimeLuxon(o.toDateTime().zone);return o=o.startOfDay(),ee(s.toMillis(),o.toMilliseconds(),t)}function ye(a,o,t){te.isTimestampOffset(a)&&(a=a.toDateTime()),te.isTimestampOffset(o)&&(o=o.toDateTime());const s=Nn(a),f=Nn(o);switch(t){case"<>":return s!==f;case"=":return s===f;case">":return s>f;case"<":return s<f;case">=":return s>=f;case"<=":return s<=f}}function Nn(a){return a.year*Al+a.month*Pl+a.day*Ll+a.hour*Rl+a.minute*Ul+1e3*a.second+a.millisecond}function pt(a,o,t){const s=Pn[a.toLowerCase()];if(s==null)throw new h(p.FunctionNotRecognized);if(o.length<s.minParams||o.length>s.maxParams)throw new h(p.InvalidParameterCount,{name:a.toUpperCase()});return s.evaluate(o,t)}function Yl(a,o){const t=Pn[a.toLowerCase()];return t!=null&&o>=t.minParams&&o<=t.maxParams}function ot(a){return!G(a)&&!A(a)&&!F(a)&&!L(a)&&!P(a)}function An(a){return A(a)||L(a)?a.toString():P(a)?a.toSQLValue():F(a)?a.millisecond===0?a.toFormat("yyyy-LL-dd HH:mm:ss"):a.toSQL({includeOffset:!1}):G(a)?An(R.fromJSDate(a)):a.toString()}function Wl(a){if(G(a))return K.fromDateJS(a);if(F(a))return K.fromParts(a.year,a.month,a.day);if(A(a))return a;if(L(a))throw new h(p.CannotCastValue);if(P(a)&&K.fromParts(a.year,a.month,a.day)===null)throw new h(p.CannotCastValue);if(H(a)){const o=K.fromReader(a);if(o!==null&&o.isValid)return o}throw new h(p.CannotCastValue)}function Jl(a,o,t){if(G(a))return qe(a,o);if(F(a))return a;if(A(a))return a.toDateTimeLuxon("unknown");if(L(a))throw new h(p.CannotCastValue);if(P(a))return a;if(H(a))return Ne(a,"unknown",t);throw new h(p.CannotCastValue)}function Ql(a){if(G(a))return J.fromDateJS(a);if(F(a))return J.fromDateTime(a);if(A(a))throw new h(p.CannotCastValue);if(L(a))return a;if(P(a))return J.fromSqlTimeStampOffset(a);if(H(a))return He(a);throw new h(p.CannotCastValue)}const Pn={extract:{minParams:2,maxParams:2,evaluate:([a,o])=>{if(o==null)return null;if(G(o))switch(a.toUpperCase()){case"SECOND":return o.getSeconds();case"MINUTE":return o.getMinutes();case"HOUR":return o.getHours();case"DAY":return o.getDate();case"MONTH":return o.getMonth()+1;case"YEAR":return o.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0;case"DOW":return R.fromJSDate(o,{zone:"system"}).weekday;case"DOY":return R.fromJSDate(o,{zone:"system"}).ordinal;case"WEEK":return R.fromJSDate(o,{zone:"system"}).weekNumber}else if(F(o))switch(a.toUpperCase()){case"SECOND":return o.second;case"MINUTE":return o.minute;case"HOUR":return o.hour;case"DAY":return o.day;case"MONTH":return o.month;case"YEAR":return o.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new h(p.InvalidFunctionParameters,{function:"EXTRACT"});case"DOW":return o.weekday;case"DOY":return o.ordinal;case"WEEK":return o.weekNumber}else if(A(o))switch(a.toUpperCase()){case"DAY":return o.day;case"MONTH":return o.month;case"YEAR":return o.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new h(p.InvalidFunctionParameters,{function:"EXTRACT"});case"DOW":return o.toDateTime("unknown").weekday;case"DOY":return o.toDateTime("unknown").ordinal;case"WEEK":return o.toDateTime("unknown").weekNumber}else if(L(o))switch(a.toUpperCase()){case"SECOND":return o.second;case"MINUTE":return o.minute;case"HOUR":return o.hour}else if(P(o))switch(a.toUpperCase()){case"SECOND":return o.second;case"MINUTE":return o.minute;case"HOUR":return o.hour;case"DAY":return o.day;case"MONTH":return o.month;case"YEAR":return o.year;case"TIMEZONE_HOUR":return o.timezoneOffsetHour;case"TIMEZONE_MINUTE":return o.timezoneOffsetMinutes;case"DOW":return o.toDateTime().weekday;case"DOY":return o.toDateTime().ordinal;case"WEEK":return o.toDateTime().weekNumber}throw new h(p.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:a=>{if(a.length===2){const[o,t]=a;return o==null||t==null?null:o.toString().substring(t-1)}if(a.length===3){const[o,t,s]=a;return o==null||t==null||s==null?null:s<=0?"":o.toString().substring(t-1,t+s-1)}}},position:{minParams:2,maxParams:2,evaluate:([a,o])=>a==null||o==null?null:o.indexOf(a)+1},trim:{minParams:2,maxParams:3,evaluate:a=>{const o=a.length===3,t=o?a[1]:" ",s=o?a[2]:a[1];if(t==null||s==null)return null;const f=`(${gl(t)})`;switch(a[0]){case"BOTH":return s.replaceAll(new RegExp(`^${f}*|${f}*$`,"g"),"");case"LEADING":return s.replaceAll(new RegExp(`^${f}*`,"g"),"");case"TRAILING":return s.replaceAll(new RegExp(`${f}*$`,"g"),"")}throw new h(p.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.abs(a[0])},ceiling:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.ceil(a[0])},floor:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.floor(a[0])},log:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.log(a[0])},log10:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.log(a[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.sin(a[0])},cos:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.cos(a[0])},tan:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.tan(a[0])},asin:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.asin(a[0])},acos:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.acos(a[0])},atan:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.atan(a[0])},sign:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:a[0]>0?1:a[0]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:a=>a[0]==null||a[1]==null?null:a[0]**a[1]},mod:{minParams:2,maxParams:2,evaluate:a=>a[0]==null||a[1]==null?null:a[0]%a[1]},round:{minParams:1,maxParams:2,evaluate:a=>{const o=a[0],t=a.length===2?10**a[1]:1;return o==null?null:Math.round(o*t)/t}},truncate:{minParams:1,maxParams:2,evaluate:a=>a[0]==null?null:a.length===1||a[1]===0?Math.trunc(a[0]):yl("trunc",a[0],-Number(a[1]))},char_length:{minParams:1,maxParams:1,evaluate:a=>H(a[0])?a[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:a=>{let o="";for(let t=0;t<a.length;t++){if(a[t]==null)return null;o+=a[t].toString()}return o}},lower:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:a[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:a[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:a=>{for(const o of a)if(o!==null)return o;return null}},cosh:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.cosh(a[0])},sinh:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.sinh(a[0])},tanh:{minParams:1,maxParams:1,evaluate:a=>a[0]==null?null:Math.tanh(a[0])},nullif:{minParams:2,maxParams:2,evaluate:a=>W(a[0],a[1],"=")?null:a[0]},cast:{minParams:2,maxParams:2,evaluate:(a,o)=>{const t=a[0],s=a[1];if(t===null)return null;switch(s.type){case"integer":{if(!ot(t))throw new h(p.CannotCastValue);const f=parseInt(t,10);if(isNaN(f))throw new h(p.CannotCastValue);return f}case"smallint":{if(!ot(t))throw new h(p.CannotCastValue);const f=parseInt(t,10);if(isNaN(f))throw new h(p.CannotCastValue);if(f>32767||f<-32767)throw new h(p.CannotCastValue);return f}case"float":case"real":{if(!ot(t))throw new h(p.CannotCastValue);const f=parseFloat(t);if(isNaN(f))throw new h(p.CannotCastValue);return f}case"time":return Ql(t);case"date":return Wl(t);case"timestamp":return Jl(t,o,s.withtimezone===!0);case"varchar":{const f=An(t);if(f.length>s.size)throw new h(p.CannotCastValue);return f}default:throw new h(p.InvalidDataType)}}}};function Ln(a,o,t,s){if(a==="||")return pt("concat",[o,t],s);if(o===null||t===null)return null;if(Y(o)){if(Y(t))return mt(o,t,a);if(ae(t))return rc(o,t,a);if(L(t))return pc();if(A(t))return mc();if(P(t))return dc();if(F(t))return cc();if(H(t))return hc(o,t,a);throw new h(p.InvalidOperator)}if(A(o)){if(Y(t))return sc(o,t,a);if(ae(t))return oc(o,t,a);if(L(t))return Oc();if(A(t))return Nc(o,t,a);if(P(t))return Tc(o,t,a);if(F(t))return yc(o,t,a);if(H(t))return Lc();throw new h(p.InvalidOperator)}if(L(o)){if(Y(t))return lc(o,t,a);if(ae(t))return Xl(o,t,a);if(L(t))return _c();if(A(t))return Dc();if(P(t))return Mc();if(F(t))return Cc();if(H(t))return Rc();throw new h(p.InvalidOperator)}if(ae(o)){if(Y(t))return nc(o,t,a);if(ae(t))return tc(o,t,a);if(L(t))return Gl(o,t,a);if(A(t))return Kl(o,t,a);if(P(t))return ec(o,t,a);if(F(t))return Bl(o,t,a);if(H(t))return Ic();throw new h(p.InvalidOperator)}if(F(o)){if(Y(t))return uc(o,t,a);if(ae(t))return ic(o,t,a);if(L(t))return Pc();if(A(t))return Fc(o,t,a);if(P(t))return Ac(o,t,a);if(F(t))return bc(o,t,a);if(H(t))return Uc();throw new h(p.InvalidOperator)}if(P(o)){if(Y(t))return fc(o,t,a);if(ae(t))return ac(o,t,a);if(L(t))return $c();if(A(t))return Sc(o,t,a);if(P(t))return Ec(o,t,a);if(F(t))return xc(o,t,a);if(H(t))return Vc();throw new h(p.InvalidOperator)}if(H(o)){if(Y(t))return vc(o,t,a);if(ae(t))return gc();if(L(t))return kc();if(A(t))return zc();if(P(t))return Hc();if(F(t))return qc();if(H(t))return wc(o,t,a);throw new h(p.InvalidOperator)}throw new h(p.InvalidOperator)}function mt(a,o,t){switch(t){case"+":return a+o;case"-":return a-o;case"*":return a*o;case"/":return a/o}throw new h(p.InvalidOperator)}function Bl(a,o,t){switch(t){case"+":return o.plus({milliseconds:a.valueInMilliseconds()});case"-":return a.valueInMilliseconds()-o.toMillis()}throw new h(p.InvalidOperator)}function Gl(a,o,t){if(t==="+")return o.plus("milliseconds",a.valueInMilliseconds());throw new h(p.InvalidOperator)}function Kl(a,o,t){if(t==="+")return o.plus("milliseconds",a.valueInMilliseconds());throw new h(p.InvalidOperator)}function Xl(a,o,t){switch(t){case"+":return a.plus("milliseconds",o.valueInMilliseconds());case"-":return a.plus("milliseconds",-1*o.valueInMilliseconds())}throw new h(p.InvalidOperator)}function ec(a,o,t){if(t==="+")return o.addMilliseconds(a.valueInMilliseconds());throw new h(p.InvalidOperator)}function tc(a,o,t){switch(t){case"+":return U.createFromMilliseconds(a.valueInMilliseconds()+o.valueInMilliseconds());case"-":return U.createFromMilliseconds(a.valueInMilliseconds()-o.valueInMilliseconds());case"*":return U.createFromMilliseconds(a.valueInMilliseconds()*o.valueInMilliseconds());case"/":return U.createFromMilliseconds(a.valueInMilliseconds()/o.valueInMilliseconds())}throw new h(p.InvalidOperator)}function nc(a,o,t){switch(t){case"+":return U.createFromMilliseconds(a.valueInMilliseconds()+o);case"-":return U.createFromMilliseconds(a.valueInMilliseconds()-o);case"*":return U.createFromMilliseconds(a.valueInMilliseconds()*o);case"/":return U.createFromMilliseconds(a.valueInMilliseconds()/o)}throw new h(p.InvalidOperator)}function rc(a,o,t){switch(t){case"+":return U.createFromMilliseconds(a+o.valueInMilliseconds());case"-":return U.createFromMilliseconds(a-o.valueInMilliseconds());case"*":return U.createFromMilliseconds(a*o.valueInMilliseconds());case"/":return U.createFromMilliseconds(a/o.valueInMilliseconds())}throw new h(p.InvalidOperator)}function oc(a,o,t){switch(t){case"+":return a.plus("milliseconds",o.valueInMilliseconds());case"-":return a.plus("milliseconds",-1*o.valueInMilliseconds())}throw new h(p.InvalidOperator)}function ic(a,o,t){switch(t){case"+":return a.plus({milliseconds:o.valueInMilliseconds()});case"-":return a.minus({milliseconds:o.valueInMilliseconds()})}throw new h(p.InvalidOperator)}function ac(a,o,t){switch(t){case"+":return a.addMilliseconds(o.valueInMilliseconds());case"-":return a.addMilliseconds(-1*o.valueInMilliseconds())}throw new h(p.InvalidOperator)}function uc(a,o,t){const s=1e3*o*24*60*60;switch(t){case"+":return a.plus({milliseconds:s});case"-":return a.minus({milliseconds:s})}throw new h(p.InvalidOperator)}function sc(a,o,t){const s=1e3*o*24*60*60;switch(t){case"+":return a.plus("milliseconds",s);case"-":return a.plus("milliseconds",-1*s)}throw new h(p.InvalidOperator)}function lc(a,o,t){const s=1e3*o*24*60*60;switch(t){case"+":return a.plus("milliseconds",s);case"-":return a.plus("milliseconds",-1*s)}throw new h(p.InvalidOperator)}function cc(a,o,t){throw new h(p.InvalidOperator)}function fc(a,o,t){const s=1e3*o*24*60*60;switch(t){case"+":return a.addMilliseconds(s);case"-":return a.addMilliseconds(-1*s)}throw new h(p.InvalidOperator)}function dc(a,o,t){throw new h(p.InvalidOperator)}function pc(a,o,t){throw new h(p.InvalidOperator)}function mc(a,o,t){throw new h(p.InvalidOperator)}function hc(a,o,t){const s=parseFloat(o);if(isNaN(s))throw new h(p.InvalidOperator);return mt(a,s,t)}function vc(a,o,t){const s=parseFloat(a);if(isNaN(s))throw new h(p.InvalidOperator);return mt(s,o,t)}function wc(a,o,t){if(t==="+")return a+o;throw new h(p.InvalidOperator)}function Ic(a,o,t){throw new h(p.InvalidOperator)}function gc(a,o,t){throw new h(p.InvalidOperator)}function yc(a,o,t){if(t==="-")return a.toDateTimeLuxon(o.zone).diff(o).as("days");throw new h(p.InvalidOperator)}function Tc(a,o,t){if(t==="-")return a.toDateTimeLuxon(o.toDateTime().zone).diff(o.toDateTime()).as("days");throw new h(p.InvalidOperator)}function Nc(a,o,t){if(t==="-")return a.toDateTimeLuxon("UTC").diff(o.toDateTimeLuxon("UTC")).as("days");throw new h(p.InvalidOperator)}function Oc(a,o,t){throw new h(p.InvalidOperator)}function $c(a,o,t){throw new h(p.InvalidOperator)}function Sc(a,o,t){if(t==="-")return a.toDateTime().diff(o.toDateTimeLuxon(a.toDateTime().zone)).as("days");throw new h(p.InvalidOperator)}function xc(a,o,t){if(t==="-")return a.toDateTime().diff(o).as("days");throw new h(p.InvalidOperator)}function Ec(a,o,t){if(t==="-")return a.toDateTime().diff(o.toDateTime()).as("days");throw new h(p.InvalidOperator)}function Cc(a,o,t){throw new h(p.InvalidOperator)}function Dc(a,o,t){throw new h(p.InvalidOperator)}function Mc(a,o,t){throw new h(p.InvalidOperator)}function _c(a,o,t){throw new h(p.InvalidOperator)}function bc(a,o,t){if(t==="-")return a.diff(o).as("days");throw new h(p.InvalidOperator)}function Fc(a,o,t){if(t==="-")return a.diff(o.toDateTimeLuxon(a.zone)).as("days");throw new h(p.InvalidOperator)}function Ac(a,o,t){if(t==="-")return a.diff(o.toDateTime()).as("days");throw new h(p.InvalidOperator)}function Pc(a,o,t){throw new h(p.InvalidOperator)}function Lc(a,o,t){throw new h(p.InvalidOperator)}function Rc(a,o,t){throw new h(p.InvalidOperator)}function Uc(a,o,t){throw new h(p.InvalidOperator)}function Vc(a,o,t){throw new h(p.InvalidOperator)}function kc(a,o,t){throw new h(p.InvalidOperator)}function zc(a,o,t){throw new h(p.InvalidOperator)}function qc(a,o,t){throw new h(p.InvalidOperator)}function Hc(a,o,t){throw new h(p.InvalidOperator)}class it extends SyntaxError{constructor(o,t,s,f){super(o),this.expected=t,this.found=s,this.location=f,this.name="SyntaxError"}format(o){let t="Error: "+this.message;if(this.location){let s=null;const f=o.find($=>$.source===this.location.source);f&&(s=f.text.split(/\r\n|\n|\r/g));const v=this.location.start,y=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,T=this.location.source+":"+y.line+":"+y.column;if(s){const $=this.location.end,b="".padEnd(y.line.toString().length," "),D=s[v.line-1],Z=(v.line===$.line?$.column:D.length+1)-v.column||1;t+=`
 --> `+T+`
`+b+` |
`+y.line+" | "+D+`
`+b+" | "+"".padEnd(v.column-1," ")+"".padEnd(Z,"^")}else t+=`
 at `+T}return t}static buildMessage(o,t){function s(E){return E.codePointAt(0).toString(16).toUpperCase()}const f=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function v(E){return f?E.replace(f,C=>"\\u{"+s(C)+"}"):E}function y(E){return v(E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,C=>"\\x0"+s(C)).replace(/[\x10-\x1F\x7F-\x9F]/g,C=>"\\x"+s(C)))}function T(E){return v(E.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,C=>"\\x0"+s(C)).replace(/[\x10-\x1F\x7F-\x9F]/g,C=>"\\x"+s(C)))}const $={literal:E=>'"'+y(E.text)+'"',class(E){const C=E.parts.map(j=>Array.isArray(j)?T(j[0])+"-"+T(j[1]):T(j));return"["+(E.inverted?"^":"")+C.join("")+"]"+(E.unicode?"u":"")},any:()=>"any character",end:()=>"end of input",other:E=>E.description};function b(E){return $[E.type](E)}function D(E){const C=E.map(b);if(C.sort(),C.length>0){let j=1;for(let re=1;re<C.length;re++)C[re-1]!==C[re]&&(C[j]=C[re],j++);C.length=j}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}function Z(E){return E?'"'+y(E)+'"':"end of input"}return"Expected "+D(o)+" but "+Z(t)+" found."}}function Zc(a,o){const t={},s=(o=o!==void 0?o:{}).grammarSource,f={start:Ft};let v=Ft;const y="!",T="=",$=">=",b=">",D="<=",Z="<>",E="!=",C="||",j="@",re="'",ht="N'",Oe="''",jn=".",Yn="null",Wn="true",Jn="false",Qn="in",Bn="is",Gn="like",Kn="escape",Xn="not",er="and",tr="or",nr="between",rr="from",or="for",ir="substring",ar="extract",ur="trim",sr="position",lr="timestamp",cr="date",fr="time",dr="leading",pr="trailing",mr="both",hr="cast",vr="as",wr="integer",Ir="int",gr="smallint",yr="float",Tr="real",Nr="varchar",Or="to",$r="interval",Sr="year",xr="timezone_hour",Er="timezone_minute",Cr="month",Dr="day",Mr="hour",_r="minute",br="second",Fr="dow",Ar="doy",Pr="week",Lr="case",Rr="end",Ur="when",Vr="then",kr="else",zr=",",qr="(",Hr=")",vt="`",Zr=/^[<-=]/,$e=/^[+\-]/,jr=/^[*\/]/,Yr=/^[A-Za-z_\x80-\uFFFF]/,Wr=/^[A-Za-z0-9_]/,wt=/^[A-Za-z0-9_.\x80-\uFFFF]/,Jr=/^["]/,It=/^[^']/,Qr=/^[0-9]/,Br=/^[eE]/,Gr=/^[ \t\n\r]/,gt=/^[^`]/,Kr=N("!",!1),Xr=N("=",!1),eo=N(">=",!1),to=N(">",!1),no=N("<=",!1),ro=N("<>",!1),oo=Q([["<","="]],!1,!1,!1),io=N("!=",!1),Se=Q(["+","-"],!1,!1,!1),ao=N("||",!1),uo=Q(["*","/"],!1,!1,!1),so=Q([["A","Z"],["a","z"],"_",["","￿"]],!1,!1,!1),lo=Q([["A","Z"],["a","z"],["0","9"],"_"],!1,!1,!1),yt=Q([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1,!1),co=Q(['"'],!1,!1,!1),fo=N("@",!1),Tt=N("'",!1),po=N("N'",!1),Nt=N("''",!1),Ot=Q(["'"],!0,!1,!1),mo=N(".",!1),ho=Q([["0","9"]],!1,!1,!1),vo=Q(["e","E"],!1,!1,!1),wo=N("NULL",!0),Io=N("TRUE",!0),go=N("FALSE",!0),yo=N("IN",!0),To=N("IS",!0),No=N("LIKE",!0),Oo=N("ESCAPE",!0),$o=N("NOT",!0),So=N("AND",!0),xo=N("OR",!0),Eo=N("BETWEEN",!0),Co=N("FROM",!0),Do=N("FOR",!0),Mo=N("SUBSTRING",!0),_o=N("EXTRACT",!0),bo=N("TRIM",!0),Fo=N("POSITION",!0),Ao=N("TIMESTAMP",!0),Po=N("DATE",!0),Lo=N("TIME",!0),Ro=N("LEADING",!0),Uo=N("TRAILING",!0),Vo=N("BOTH",!0),ko=N("CAST",!0),zo=N("AS",!0),qo=N("INTEGER",!0),Ho=N("INT",!0),Zo=N("SMALLINT",!0),jo=N("FLOAT",!0),Yo=N("REAL",!0),Wo=N("VARCHAR",!0),Jo=N("TO",!0),Qo=N("INTERVAL",!0),Bo=N("YEAR",!0),Go=N("TIMEZONE_HOUR",!0),Ko=N("TIMEZONE_MINUTE",!0),Xo=N("MONTH",!0),ei=N("DAY",!0),ti=N("HOUR",!0),ni=N("MINUTE",!0),ri=N("SECOND",!0),oi=N("DOW",!0),ii=N("DOY",!0),ai=N("WEEK",!0),ui=N("CASE",!0),si=N("END",!0),li=N("WHEN",!0),ci=N("THEN",!0),fi=N("ELSE",!0),di=N(",",!1),pi=N("(",!1),mi=N(")",!1),hi=Q([" ","	",`
`,"\r"],!1,!1,!1),$t=N("`",!1),St=Q(["`"],!0,!1,!1);function Xc(e){return e}function vi(e){return{type:"expression-list",location:g(),value:e}}function xt(e,n,i){return{op:n,expr:i,location:g()}}function wi(e,n){return we(e,n)}function Et(e,n,i){return{op:n,expr:i,location:g()}}function Ii(e,n){return we(e,n)}function gi(e){return pl("NOT",e,g())}function yi(e,n){return n==""||n==null||n==null?e:n.type=="arithmetic"?we(e,n.tail):hn(n.op,e,n.right,n.escape,g())}function Ct(e,n){return{op:e,expr:n,location:g()}}function Ti(e){return{type:"arithmetic",tail:e}}function Ni(e,n){return{op:e+"NOT",right:n}}function Oi(e,n){return{op:e,right:n}}function $i(e,n,i){return B(g(),n,i)}function Si(e,n){return{op:"NOT"+e,right:n}}function xi(e,n,i){return B(g(),n,i)}function Ei(e,n){return{op:e,right:n}}function Ci(e){return e[0]+" "+e[2]}function Di(e){return e[0]+" "+e[2]}function Mi(e,n,i){return{op:e,right:n,escape:i.value}}function _i(e,n){return{op:e,right:n,escape:""}}function bi(e,n){return{op:e,right:n}}function Fi(e,n){return{op:e,right:n}}function Dt(e,n,i){return{op:n,expr:i,location:g()}}function Ai(e,n){return we(e,n)}function Mt(e,n,i){return{op:n,expr:i,location:g()}}function Pi(e,n){return we(e,n)}function Li(e){return e.paren=!0,e}function Ri(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",location:g(),mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",location:g(),mode:"timestamp"}:/^CURRENT_TIME$/i.test(e)?{type:"current-time",location:g(),mode:"time"}:/^CURRENT_USER$/i.test(e)?{type:"current-user",location:g()}:{type:"column-reference",location:g(),table:"",column:e}}function Ui(e){return{type:"column-reference",location:g(),table:"",column:e,delimited:!0}}function ef(e){return e}function Vi(e,n){return e+n.join("")}function ki(e,n){return e+n.join("")}function tf(e){return e}function zi(e){return e.join("")}function qi(){return'"'}function Hi(e){return{type:"parameter",location:g(),value:e[1]}}function Zi(e,n){return B(g(),e,n)}function ji(e,n){return B(g(),e,n)}function Yi(e){return{type:"function",location:g(),name:"extract",args:e}}function Wi(e,n,i){return B(g(),e,n,...i?[i]:[])}function Ji(e,n,i){return B(g(),e,n,i)}function Qi(e){return{type:"function",location:g(),name:"substring",args:e}}function Bi(e,n){return B(g(),e,n)}function Gi(e,n){return B(g(),e,n)}function Ki(e){return{type:"function",location:g(),name:"cast",args:e}}function Xi(){return{type:"data-type",location:g(),value:{type:"integer"}}}function ea(){return{type:"data-type",location:g(),value:{type:"smallint"}}}function ta(){return{type:"data-type",location:g(),value:{type:"float"}}}function na(){return{type:"data-type",location:g(),value:{type:"real"}}}function ra(){return{type:"data-type",location:g(),value:{type:"date"}}}function oa(){return{type:"data-type",location:g(),value:{type:"timestamp"}}}function ia(){return{type:"data-type",location:g(),value:{type:"time"}}}function aa(e){return{type:"data-type",location:g(),value:{type:"varchar",size:parseInt(e)}}}function ua(e,n,i){return B(g(),e,n,i)}function sa(e,n){return B(g(),e,n)}function la(e){return{type:"function",location:g(),name:"trim",args:e}}function ca(e){return{type:"string",location:g(),value:e??"BOTH"}}function fa(e,n){return B(g(),e,n)}function da(e,n){return B(g(),e,n)}function pa(e){return{type:"function",location:g(),name:"position",args:e}}function ma(e,n){return{type:"function",location:g(),name:e,args:n}}function ha(e){return{type:"string",location:g(),value:e}}function va(e){return e.type==="string"&&ml(e.value),{type:"timestamp",location:g(),value:e.value}}function wa(e){return e.type==="string"&&hl(e.value),{type:"time",location:g(),value:e.value}}function Ia(e,n,i){return{type:"interval",location:g(),value:n,qualifier:i,op:e}}function ga(e,n){return{type:"interval",location:g(),value:e,qualifier:n,op:""}}function ya(e,n){return{type:"interval-qualifier",location:g(),start:e,end:n}}function Ta(e,n){return{type:"interval-period",location:g(),period:e.value,precision:n,secondary:null}}function Na(e){return{type:"interval-period",location:g(),period:e.value,precision:null,secondary:null}}function Oa(e){return{type:"interval-period",location:g(),period:e.value,precision:null,secondary:null}}function $a(e,n){return{type:"interval-period",location:g(),period:"second",precision:e,secondary:n}}function Sa(e){return{type:"interval-period",location:g(),period:"second",precision:e,secondary:null}}function xa(){return{type:"interval-period",location:g(),period:"second",precision:null,secondary:null}}function Ea(e,n){return{type:"interval-period",location:g(),period:e.value,precision:n,secondary:null}}function Ca(e){return{type:"interval-period",location:g(),period:e.value,precision:null,secondary:null}}function Da(e,n){return{type:"interval-period",location:g(),period:"second",precision:e,secondary:n}}function Ma(e){return{type:"interval-period",location:g(),period:"second",precision:e,secondary:null}}function _a(){return{type:"interval-period",location:g(),period:"second",precision:null,secondary:null}}function ba(){return{type:"string",location:g(),value:"day"}}function Fa(){return{type:"string",location:g(),value:"hour"}}function Aa(){return{type:"string",location:g(),value:"minute"}}function Pa(){return{type:"string",location:g(),value:"month"}}function La(){return{type:"string",location:g(),value:"year"}}function Ra(e){return parseFloat(e)}function Ua(e){return parseFloat(e)}function Va(e){return e.type==="string"&&vl(e.value),{type:"date",location:g(),value:e.value}}function ka(){return{type:"null",location:g(),value:null}}function za(){return{type:"boolean",location:g(),value:!0}}function qa(){return{type:"boolean",location:g(),value:!1}}function _t(){return"'"}function Ha(e){return{type:"string",location:g(),value:e.join("")}}function Za(e,n){return{type:"case-expression",location:g(),format:"simple",operand:e,clauses:n,else:null,elseLocation:null}}function ja(e,n,i){return{type:"case-expression",location:g(),format:"simple",operand:e,clauses:n,else:i.value,elseLocation:i.location}}function Ya(e){return{type:"case-expression",location:g(),format:"searched",clauses:e,else:null,elseLocation:null}}function Wa(e,n){return{type:"case-expression",location:g(),format:"searched",clauses:e,else:n.value,elseLocation:n.location}}function Ja(e,n){return{type:"when-clause",location:g(),operand:e,value:n}}function Qa(e,n){return{type:"when-clause",location:g(),operand:e,value:n}}function Ba(e){return{type:"else-clause",location:g(),value:e}}function Ga(e){return{type:"number",location:g(),value:e}}function Ka(e,n,i){return parseFloat(e+n+i)}function Xa(e,n){return parseFloat(e+n)}function eu(e,n){return parseFloat(e+n)}function tu(e){return parseFloat(e)}function nu(e,n){return e[0]+n}function ru(e){return"."+(e??"")}function ou(e,n){return e+n}function iu(e){return e.join("")}function au(e,n){return"e"+(n===null?"":n)}function uu(){return"IN"}function su(){return"IS"}function lu(){return"LIKE"}function cu(){return"ESCAPE"}function fu(){return"NOT"}function du(){return"AND"}function pu(){return"OR"}function mu(){return"BETWEEN"}function hu(){return"FROM"}function vu(){return"FOR"}function wu(){return"SUBSTRING"}function Iu(){return"EXTRACT"}function gu(){return"TRIM"}function yu(){return"POSITION"}function Tu(){return"TIMESTAMP"}function Nu(){return"DATE"}function Ou(){return"TIME"}function $u(){return"LEADING"}function Su(){return"TRAILING"}function xu(){return"BOTH"}function Eu(){return"CAST"}function Cu(){return"AS"}function Du(){return"INTEGER"}function Mu(){return"INT"}function _u(){return"SMALLINT"}function bu(){return"FLOAT"}function Fu(){return"REAL"}function Au(){return"VARCHAR"}function Pu(){return"TO"}function Lu(){return"INTERVAL"}function Ru(){return"YEAR"}function Uu(){return"TIMEZONE_HOUR"}function Vu(){return"TIMEZONE_MINUTE"}function ku(){return"MONTH"}function zu(){return"DAY"}function qu(){return"HOUR"}function Hu(){return"MINUTE"}function Zu(){return"SECOND"}function ju(){return"DOW"}function Yu(){return"DOY"}function Wu(){return"WEEK"}function Ju(){return"CASE"}function Qu(){return"END"}function Bu(){return"WHEN"}function Gu(){return"THEN"}function Ku(){return"ELSE"}function nf(e){return e}function Xu(e){return e.join("")}let r=0|o.peg$currPos,d=r;const fe=[{line:1,column:1}];let me,X=r,xe=o.peg$maxFailExpected||[],c=0|o.peg$silentFails;if(o.startRule){if(!(o.startRule in f))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');v=f[o.startRule]}function g(){return Ee(d,r)}function Ze(e,n){throw ns(e,n=n!==void 0?n:Ee(d,r))}function es(e=r){const n=a.codePointAt(e);return n===void 0?"":String.fromCodePoint(n)}function N(e,n){return{type:"literal",text:e,ignoreCase:n}}function Q(e,n,i,u){return{type:"class",parts:e,inverted:n,ignoreCase:i,unicode:u}}function ts(){return{type:"end"}}function bt(e){let n,i=fe[e];if(i)return i;if(e>=fe.length)n=fe.length-1;else for(n=e;!fe[--n];);for(i=fe[n],i={line:i.line,column:i.column};n<e;)a.charCodeAt(n)===10?(i.line++,i.column=1):i.column++,n++;return fe[e]=i,i}function Ee(e,n,i){const u=bt(e),l=bt(n);return{source:s,start:{offset:e,line:u.line,column:u.column},end:{offset:n,line:l.line,column:l.column}}}function I(e){r<X||(r>X&&(X=r,xe=[]),xe.push(e))}function ns(e,n){return new it(e,null,null,n)}function rs(e,n,i){return new it(it.buildMessage(e,n),e,n,i)}function Ft(){let e,n;return e=r,m(),n=M(),n!==t?(m(),d=e,e=n):(r=e,e=t),e}function At(){let e,n,i,u,l,w,O,x;if(e=r,n=V(),n!==t){for(m(),i=[],u=M();u!==t;)i.push(u),u=r,l=r,w=m(),O=oe(),O!==t?(x=m(),w=[w,O,x],l=w):(r=l,l=t),l!==t?(l=M(),l===t?(r=u,u=t):u=l):u=l;u=m(),l=k(),l!==t?(d=e,e=vi(i)):(r=e,e=t)}else r=e,e=t;return e}function M(){let e,n,i,u,l,w;if(e=r,n=je(),n!==t){for(i=[],u=r,m(),l=Xt(),l!==t?(m(),w=je(),w!==t?(d=u,u=xt(n,l,w)):(r=u,u=t)):(r=u,u=t);u!==t;)i.push(u),u=r,m(),l=Xt(),l!==t?(m(),w=je(),w!==t?(d=u,u=xt(n,l,w)):(r=u,u=t)):(r=u,u=t);d=e,e=wi(n,i)}else r=e,e=t;return e}function je(){let e,n,i,u,l,w;if(e=r,n=Ce(),n!==t){for(i=[],u=r,m(),l=Pe(),l!==t?(m(),w=Ce(),w!==t?(d=u,u=Et(n,l,w)):(r=u,u=t)):(r=u,u=t);u!==t;)i.push(u),u=r,m(),l=Pe(),l!==t?(m(),w=Ce(),w!==t?(d=u,u=Et(n,l,w)):(r=u,u=t)):(r=u,u=t);d=e,e=Ii(n,i)}else r=e,e=t;return e}function Ce(){let e,n,i,u,l;return e=r,n=ve(),n===t&&(n=r,a.charCodeAt(r)===33?(i=y,r++):(i=t,c===0&&I(Kr)),i!==t?(u=r,c++,a.charCodeAt(r)===61?(l=T,r++):(l=t,c===0&&I(Xr)),c--,l===t?u=void 0:(r=u,u=t),u!==t?(i=[i,u],n=i):(r=n,n=t)):(r=n,n=t)),n!==t?(i=m(),u=Ce(),u!==t?(d=e,e=gi(u)):(r=e,e=t)):(r=e,e=t),e===t&&(e=os()),e}function os(){let e,n,i,u;return e=r,n=ne(),n!==t?(i=r,m(),u=is(),u!==t?i=u:(r=i,i=t),i===t&&(i=null),d=e,e=yi(n,i)):(r=e,e=t),e}function is(){let e;return e=as(),e===t&&(e=cs(),e===t&&(e=ss(),e===t&&(e=us(),e===t&&(e=ls())))),e}function as(){let e,n,i,u,l;if(e=r,n=[],i=r,m(),u=Pt(),u!==t?(m(),l=ne(),l!==t?(d=i,i=Ct(u,l)):(r=i,i=t)):(r=i,i=t),i!==t)for(;i!==t;)n.push(i),i=r,m(),u=Pt(),u!==t?(m(),l=ne(),l!==t?(d=i,i=Ct(u,l)):(r=i,i=t)):(r=i,i=t);else n=t;return n!==t&&(d=e,n=Ti(n)),e=n,e}function Pt(){let e;return a.substr(r,2)===$?(e=$,r+=2):(e=t,c===0&&I(eo)),e===t&&(a.charCodeAt(r)===62?(e=b,r++):(e=t,c===0&&I(to)),e===t&&(a.substr(r,2)===D?(e=D,r+=2):(e=t,c===0&&I(no)),e===t&&(a.substr(r,2)===Z?(e=Z,r+=2):(e=t,c===0&&I(ro)),e===t&&(e=a.charAt(r),Zr.test(e)?r++:(e=t,c===0&&I(oo)),e===t&&(a.substr(r,2)===E?(e=E,r+=2):(e=t,c===0&&I(io))))))),e}function us(){let e,n,i,u;return e=r,n=Gt(),n!==t?(m(),i=ve(),i!==t?(m(),u=ne(),u!==t?(d=e,e=Ni(n,u)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Gt(),n!==t?(m(),i=ne(),i!==t?(d=e,e=Oi(n,i)):(r=e,e=t)):(r=e,e=t)),e}function ss(){let e,n,i,u,l,w,O,x;return e=r,n=ve(),n!==t?(m(),i=en(),i!==t?(u=m(),l=r,w=ne(),w!==t?(m(),O=Pe(),O!==t?(m(),x=ne(),x!==t?(d=l,l=$i(i,w,x)):(r=l,l=t)):(r=l,l=t)):(r=l,l=t),l!==t?(d=e,e=Si(i,l)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=en(),n!==t?(m(),i=r,u=ne(),u!==t?(l=m(),w=Pe(),w!==t?(m(),O=ne(),O!==t?(d=i,i=xi(n,u,O)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i!==t?(d=e,e=Ei(n,i)):(r=e,e=t)):(r=e,e=t)),e}function Lt(){let e,n,i,u,l;return e=r,n=r,i=ve(),i!==t?(u=m(),l=Kt(),l!==t?(i=[i,u,l],n=i):(r=n,n=t)):(r=n,n=t),n!==t&&(d=e,n=Ci(n)),e=n,e===t&&(e=Kt()),e}function Rt(){let e,n,i,u,l;return e=r,n=r,i=ve(),i!==t?(u=m(),l=Ge(),l!==t?(i=[i,u,l],n=i):(r=n,n=t)):(r=n,n=t),n!==t&&(d=e,n=Di(n)),e=n,e===t&&(e=Ge()),e}function ls(){let e,n,i,u,l;return e=r,n=Lt(),n!==t?(m(),i=ue(),i!==t?(m(),u=Hs(),u!==t?(m(),l=Be(),l!==t?(d=e,e=Mi(n,i,l)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Lt(),n!==t?(m(),i=ue(),i!==t?(d=e,e=_i(n,i)):(r=e,e=t)):(r=e,e=t)),e}function cs(){let e,n,i;return e=r,n=Rt(),n!==t?(m(),i=At(),i!==t?(d=e,e=bi(n,i)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Rt(),n!==t?(m(),i=Qe(),i!==t?(d=e,e=Fi(n,i)):(r=e,e=t)):(r=e,e=t)),e}function ne(){let e,n,i,u,l,w;if(e=r,n=Ye(),n!==t){for(i=[],u=r,m(),l=Ut(),l!==t?(m(),w=Ye(),w!==t?(d=u,u=Dt(n,l,w)):(r=u,u=t)):(r=u,u=t);u!==t;)i.push(u),u=r,m(),l=Ut(),l!==t?(m(),w=Ye(),w!==t?(d=u,u=Dt(n,l,w)):(r=u,u=t)):(r=u,u=t);d=e,e=Ai(n,i)}else r=e,e=t;return e}function Ut(){let e;return e=a.charAt(r),$e.test(e)?r++:(e=t,c===0&&I(Se)),e===t&&(a.substr(r,2)===C?(e=C,r+=2):(e=t,c===0&&I(ao))),e}function Ye(){let e,n,i,u,l,w;if(e=r,n=We(),n!==t){for(i=[],u=r,m(),l=Vt(),l!==t?(m(),w=We(),w!==t?(d=u,u=Mt(n,l,w)):(r=u,u=t)):(r=u,u=t);u!==t;)i.push(u),u=r,m(),l=Vt(),l!==t?(m(),w=We(),w!==t?(d=u,u=Mt(n,l,w)):(r=u,u=t)):(r=u,u=t);d=e,e=Pi(n,i)}else r=e,e=t;return e}function Vt(){let e;return e=a.charAt(r),jr.test(e)?r++:(e=t,c===0&&I(uo)),e}function We(){let e,n,i,u;return e=$s(),e===t&&(e=Is(),e===t&&(e=gs(),e===t&&(e=Ts(),e===t&&(e=Ns(),e===t&&(e=ys(),e===t&&(e=Os(),e===t&&(e=As(),e===t&&(e=fs(),e===t&&(e=Qe(),e===t&&(e=r,n=V(),n!==t?(m(),i=M(),i!==t?(m(),u=k(),u!==t?(d=e,e=Li(i)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t))))))))))),e}function fs(){let e,n;return e=r,n=ds(),n!==t&&(d=e,n=Ri(n)),e=n,e===t&&(e=r,n=ms(),n!==t&&(d=e,n=Ui(n)),e=n),e}function ds(){let e,n;return e=r,n=ps(),n!==t&&(d=e,n=n),e=n,e}function ps(){let e,n,i,u;if(e=r,n=Je(),n!==t){for(i=[],u=zt();u!==t;)i.push(u),u=zt();d=e,e=Vi(n,i)}else r=e,e=t;return e}function kt(){let e,n,i,u;if(e=r,n=Je(),n!==t){for(i=[],u=S();u!==t;)i.push(u),u=S();d=e,e=ki(n,i)}else r=e,e=t;return e}function Je(){let e;return e=a.charAt(r),Yr.test(e)?r++:(e=t,c===0&&I(so)),e}function S(){let e;return e=a.charAt(r),Wr.test(e)?r++:(e=t,c===0&&I(lo)),e}function zt(){let e;return e=a.charAt(r),wt.test(e)?r++:(e=t,c===0&&I(yt)),e}function ms(){let e,n,i,u;return e=r,n=De(),n!==t?(i=hs(),u=De(),u!==t?(d=e,e=i):(r=e,e=t)):(r=e,e=t),e}function hs(){let e,n,i;for(e=r,n=[],i=qt();i!==t;)n.push(i),i=qt();return d=e,n=zi(n),e=n,e}function qt(){let e;return e=ws(),e===t&&(e=vs()),e}function vs(){let e,n,i;return e=r,n=De(),n!==t?(i=De(),i!==t?(d=e,e=qi()):(r=e,e=t)):(r=e,e=t),e}function ws(){let e;return e=a.charAt(r),wt.test(e)?r++:(e=t,c===0&&I(yt)),e}function De(){let e;return e=a.charAt(r),Jr.test(e)?r++:(e=t,c===0&&I(co)),e}function Qe(){let e,n,i,u;return e=r,n=r,a.charCodeAt(r)===64?(i=j,r++):(i=t,c===0&&I(fo)),i!==t?(u=kt(),u!==t?(i=[i,u],n=i):(r=n,n=t)):(r=n,n=t),n!==t&&(d=e,n=Hi(n)),e=n,e}function Is(){let e,n,i,u,l,w,O,x;return e=r,n=tn(),n!==t?(m(),i=r,u=V(),u!==t?(m(),l=jt(),l!==t?(m(),w=Ke(),w!==t?(m(),O=M(),O!==t?(m(),x=k(),x!==t?(d=i,i=Zi(l,O)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i===t&&(i=r,u=V(),u!==t?(m(),l=jt(),l!==t?(m(),w=oe(),w!==t?(m(),O=M(),O!==t?(m(),x=k(),x!==t?(d=i,i=ji(l,O)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)),i!==t?(d=e,e=Yi(i)):(r=e,e=t)):(r=e,e=t),e}function gs(){let e,n,i,u,l,w,O,x,ie,Ue,Ie;return e=r,n=js(),n!==t?(m(),i=r,u=V(),u!==t?(m(),l=M(),l!==t?(m(),w=Ke(),w!==t?(m(),O=M(),O!==t?(m(),x=r,ie=Zs(),ie!==t?(Ue=m(),Ie=M(),Ie!==t?(m(),x=Ie):(r=x,x=t)):(r=x,x=t),x===t&&(x=null),ie=k(),ie!==t?(d=i,i=Wi(l,O,x)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i===t&&(i=r,u=V(),u!==t?(m(),l=M(),l!==t?(m(),w=oe(),w!==t?(m(),O=M(),O!==t?(m(),x=oe(),x!==t?(ie=m(),Ue=M(),Ue!==t?(Ie=k(),Ie!==t?(d=i,i=Ji(l,O,Ue)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)),i!==t?(d=e,e=Qi(i)):(r=e,e=t)):(r=e,e=t),e}function ys(){let e,n,i,u,l,w,O,x;return e=r,n=Gs(),n!==t?(m(),i=r,u=V(),u!==t?(m(),l=M(),l!==t?(m(),w=Ks(),w!==t?(m(),O=Ht(),O!==t?(m(),x=k(),x!==t?(d=i,i=Bi(l,O)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i===t&&(i=r,u=V(),u!==t?(m(),l=M(),l!==t?(m(),w=oe(),w!==t?(m(),O=Ht(),O!==t?(m(),x=k(),x!==t?(d=i,i=Gi(l,O)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)),i!==t?(d=e,e=Ki(i)):(r=e,e=t)):(r=e,e=t),e}function Ht(){let e,n,i,u,l;return e=r,n=Xs(),n===t&&(n=el()),n!==t&&(d=e,n=Xi()),e=n,e===t&&(e=r,n=tl(),n!==t&&(d=e,n=ea()),e=n,e===t&&(e=r,n=nl(),n!==t&&(d=e,n=ta()),e=n,e===t&&(e=r,n=rl(),n!==t&&(d=e,n=na()),e=n,e===t&&(e=r,n=rn(),n!==t&&(d=e,n=ra()),e=n,e===t&&(e=r,n=nn(),n!==t&&(d=e,n=oa()),e=n,e===t&&(e=r,n=on(),n!==t&&(d=e,n=ia()),e=n,e===t&&(e=r,n=ol(),n!==t?(m(),i=V(),i!==t?(m(),u=se(),u!==t?(m(),l=k(),l!==t?(d=e,e=aa(u)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)))))))),e}function Ts(){let e,n,i,u,l,w,O,x,ie;return e=r,n=Ys(),n!==t?(m(),i=r,u=V(),u!==t?(m(),l=Zt(),m(),w=M(),w!==t?(m(),O=Ke(),O!==t?(m(),x=M(),x!==t?(m(),ie=k(),ie!==t?(d=i,i=ua(l,w,x)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i===t&&(i=r,u=V(),u!==t?(m(),l=Zt(),m(),w=M(),w!==t?(m(),O=k(),O!==t?(d=i,i=sa(l,w)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)),i!==t?(d=e,e=la(i)):(r=e,e=t)):(r=e,e=t),e}function Zt(){let e,n;return e=r,n=Js(),n===t&&(n=Qs(),n===t&&(n=Bs())),n===t&&(n=null),d=e,n=ca(n),e=n,e}function Ns(){let e,n,i,u,l,w,O,x;return e=r,n=Ws(),n!==t?(m(),i=r,u=V(),u!==t?(m(),l=M(),l!==t?(m(),w=Ge(),w!==t?(m(),O=M(),O!==t?(m(),x=k(),x!==t?(d=i,i=fa(l,O)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t),i===t&&(i=r,u=V(),u!==t?(m(),l=M(),l!==t?(m(),w=oe(),w!==t?(m(),O=M(),O!==t?(m(),x=k(),x!==t?(d=i,i=da(l,O)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)):(r=i,i=t)),i!==t?(d=e,e=pa(i)):(r=e,e=t)):(r=e,e=t),e}function Os(){let e,n,i,u;return e=r,n=r,c++,i=tn(),c--,i===t?n=void 0:(r=n,n=t),n!==t?(i=dl(),i!==t?(m(),u=At(),u!==t?(d=e,e=ma(i,u)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function jt(){let e,n;return e=r,n=un(),n===t&&(n=sn(),n===t&&(n=ln(),n===t&&(n=cn(),n===t&&(n=fn(),n===t&&(n=le(),n===t&&(n=al(),n===t&&(n=ul(),n===t&&(n=sl(),n===t&&(n=ll(),n===t&&(n=cl())))))))))),n!==t&&(d=e,n=ha(n)),e=n,e}function $s(){let e;return e=Be(),e===t&&(e=Rs(),e===t&&(e=Fs(),e===t&&(e=bs(),e===t&&(e=_s(),e===t&&(e=Ss(),e===t&&(e=Es(),e===t&&(e=xs()))))))),e}function Ss(){let e,n,i;return e=r,n=nn(),n!==t?(m(),i=ue(),i!==t?(d=e,e=va(i)):(r=e,e=t)):(r=e,e=t),e}function xs(){let e,n,i;return e=r,n=on(),n!==t?(m(),i=ue(),i!==t?(d=e,e=wa(i)):(r=e,e=t)):(r=e,e=t),e}function Es(){let e,n,i,u,l;return e=r,n=an(),n!==t?(m(),i=a.charAt(r),$e.test(i)?r++:(i=t,c===0&&I(Se)),i!==t?(m(),u=ue(),u!==t?(m(),l=Yt(),l!==t?(d=e,e=Ia(i,u,l)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=an(),n!==t?(m(),i=ue(),i!==t?(m(),u=Yt(),u!==t?(d=e,e=ga(i,u)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)),e}function Yt(){let e,n,i,u;return e=r,n=Cs(),n!==t?(m(),i=il(),i!==t?(m(),u=Ds(),u!==t?(d=e,e=ya(n,u)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=Ms()),e}function Cs(){let e,n,i,u,l;return e=r,n=he(),n!==t?(m(),i=V(),i!==t?(m(),u=_e(),u!==t?(m(),l=k(),l!==t?(d=e,e=Ta(n,u)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=he(),n!==t&&(d=e,n=Na(n)),e=n),e}function Ds(){let e,n,i,u,l,w,O;return e=r,n=he(),n!==t&&(d=e,n=Oa(n)),e=n,e===t&&(e=r,n=le(),n!==t?(m(),i=V(),i!==t?(m(),u=_e(),u!==t?(m(),l=oe(),l!==t?(m(),w=Me(),w!==t?(m(),O=k(),O!==t?(d=e,e=$a(u,w)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=le(),n!==t?(m(),i=V(),i!==t?(m(),u=_e(),u!==t?(m(),l=k(),l!==t?(d=e,e=Sa(u)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=le(),n!==t&&(d=e,n=xa()),e=n))),e}function Ms(){let e,n,i,u,l,w,O;return e=r,n=he(),n!==t?(m(),i=V(),i!==t?(m(),u=Me(),u!==t?(m(),l=k(),l!==t?(d=e,e=Ea(n,u)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=he(),n!==t&&(d=e,n=Ca(n)),e=n,e===t&&(e=r,n=le(),n!==t?(m(),i=V(),i!==t?(m(),u=_e(),u!==t?(m(),l=oe(),l!==t?(m(),w=Me(),w!==t?(m(),O=k(),O!==t?(d=e,e=Da(u,w)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=le(),n!==t?(m(),i=V(),i!==t?(m(),u=Me(),u!==t?(m(),l=k(),l!==t?(d=e,e=Ma(u)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=le(),n!==t&&(d=e,n=_a()),e=n)))),e}function he(){let e,n;return e=r,n=ln(),n!==t&&(d=e,n=ba()),e=n,e===t&&(e=r,n=cn(),n!==t&&(d=e,n=Fa()),e=n,e===t&&(e=r,n=fn(),n!==t&&(d=e,n=Aa()),e=n,e===t&&(e=r,n=sn(),n!==t&&(d=e,n=Pa()),e=n,e===t&&(e=r,n=un(),n!==t&&(d=e,n=La()),e=n)))),e}function Me(){let e,n;return e=r,n=se(),n!==t&&(d=e,n=Ra(n)),e=n,e}function _e(){let e,n;return e=r,n=se(),n!==t&&(d=e,n=Ua(n)),e=n,e}function _s(){let e,n,i;return e=r,n=rn(),n!==t?(m(),i=ue(),i!==t?(d=e,e=Va(i)):(r=e,e=t)):(r=e,e=t),e}function bs(){let e,n;return e=r,n=ks(),n!==t&&(d=e,n=ka()),e=n,e}function Fs(){let e,n;return e=r,n=zs(),n!==t&&(d=e,n=za()),e=n,e===t&&(e=r,n=qs(),n!==t&&(d=e,n=qa()),e=n),e}function ue(){let e;return e=Be(),e===t&&(e=Qe()),e}function Be(){let e,n,i,u,l;if(e=r,a.charCodeAt(r)===39?(n=re,r++):(n=t,c===0&&I(Tt)),n===t&&(a.substr(r,2)===ht?(n=ht,r+=2):(n=t,c===0&&I(po))),n!==t){for(i=[],u=r,a.substr(r,2)===Oe?(l=Oe,r+=2):(l=t,c===0&&I(Nt)),l!==t&&(d=u,l=_t()),u=l,u===t&&(u=a.charAt(r),It.test(u)?r++:(u=t,c===0&&I(Ot)));u!==t;)i.push(u),u=r,a.substr(r,2)===Oe?(l=Oe,r+=2):(l=t,c===0&&I(Nt)),l!==t&&(d=u,l=_t()),u=l,u===t&&(u=a.charAt(r),It.test(u)?r++:(u=t,c===0&&I(Ot)));a.charCodeAt(r)===39?(u=re,r++):(u=t,c===0&&I(Tt)),u!==t?(d=e,e=Ha(i)):(r=e,e=t)}else r=e,e=t;return e}function As(){let e;return e=Ps(),e===t&&(e=Ls()),e}function Ps(){let e,n,i,u,l,w,O;if(e=r,n=Le(),n!==t)if(m(),i=M(),i!==t){for(m(),u=[],l=r,w=Fe(),w!==t?(O=m(),l=w):(r=l,l=t);l!==t;)u.push(l),l=r,w=Fe(),w!==t?(O=m(),l=w):(r=l,l=t);l=Re(),l!==t?(d=e,e=Za(i,u)):(r=e,e=t)}else r=e,e=t;else r=e,e=t;if(e===t)if(e=r,n=Le(),n!==t)if(m(),i=M(),i!==t){for(m(),u=[],l=r,w=Fe(),w!==t?(O=m(),l=w):(r=l,l=t);l!==t;)u.push(l),l=r,w=Fe(),w!==t?(O=m(),l=w):(r=l,l=t);l=Wt(),l!==t?(w=m(),O=Re(),O!==t?(d=e,e=ja(i,u,l)):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;else r=e,e=t;return e}function Ls(){let e,n,i,u,l,w;if(e=r,n=Le(),n!==t){for(m(),i=[],u=r,l=be(),l!==t?(w=m(),u=l):(r=u,u=t);u!==t;)i.push(u),u=r,l=be(),l!==t?(w=m(),u=l):(r=u,u=t);u=Re(),u!==t?(d=e,e=Ya(i)):(r=e,e=t)}else r=e,e=t;if(e===t)if(e=r,n=Le(),n!==t){for(m(),i=[],u=r,l=be(),l!==t?(w=m(),u=l):(r=u,u=t);u!==t;)i.push(u),u=r,l=be(),l!==t?(w=m(),u=l):(r=u,u=t);u=Wt(),u!==t?(l=m(),w=Re(),w!==t?(d=e,e=Wa(i,u)):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;return e}function be(){let e,n,i,u,l;return e=r,n=dn(),n!==t?(m(),i=M(),i!==t?(m(),u=pn(),u!==t?(m(),l=M(),l!==t?(d=e,e=Ja(i,l)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function Fe(){let e,n,i,u,l;return e=r,n=dn(),n!==t?(m(),i=M(),i!==t?(m(),u=pn(),u!==t?(m(),l=M(),l!==t?(d=e,e=Qa(i,l)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e}function Wt(){let e,n,i;return e=r,n=fl(),n!==t?(m(),i=M(),i!==t?(d=e,e=Ba(i)):(r=e,e=t)):(r=e,e=t),e}function Rs(){let e,n,i,u;return e=r,n=Us(),n!==t?(i=r,c++,u=Je(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ga(n)):(r=e,e=t)):(r=e,e=t),e}function Us(){let e,n,i,u;return e=r,n=Ae(),n!==t?(i=Jt(),i!==t?(u=Qt(),u!==t?(d=e,e=Ka(n,i,u)):(r=e,e=t)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Ae(),n!==t?(i=Jt(),i!==t?(d=e,e=Xa(n,i)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Ae(),n!==t?(i=Qt(),i!==t?(d=e,e=eu(n,i)):(r=e,e=t)):(r=e,e=t),e===t&&(e=r,n=Ae(),n!==t&&(d=e,n=tu(n)),e=n))),e}function Ae(){let e,n,i;return e=se(),e===t&&(e=r,n=a.charAt(r),$e.test(n)?r++:(n=t,c===0&&I(Se)),n!==t?(i=se(),i!==t?(d=e,e=nu(n,i)):(r=e,e=t)):(r=e,e=t)),e}function Jt(){let e,n,i;return e=r,a.charCodeAt(r)===46?(n=jn,r++):(n=t,c===0&&I(mo)),n!==t?(i=se(),i===t&&(i=null),d=e,e=ru(i)):(r=e,e=t),e}function Qt(){let e,n,i;return e=r,n=Vs(),n!==t?(i=se(),i!==t?(d=e,e=ou(n,i)):(r=e,e=t)):(r=e,e=t),e}function se(){let e,n,i;if(e=r,n=[],i=Bt(),i!==t)for(;i!==t;)n.push(i),i=Bt();else n=t;return n!==t&&(d=e,n=iu(n)),e=n,e}function Bt(){let e;return e=a.charAt(r),Qr.test(e)?r++:(e=t,c===0&&I(ho)),e}function Vs(){let e,n,i;return e=r,n=a.charAt(r),Br.test(n)?r++:(n=t,c===0&&I(vo)),n!==t?(i=a.charAt(r),$e.test(i)?r++:(i=t,c===0&&I(Se)),i===t&&(i=null),d=e,e=au(n,i)):(r=e,e=t),e}function ks(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===Yn?r+=4:(n=t,c===0&&I(wo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(n=[n,i],e=n):(r=e,e=t)):(r=e,e=t),e}function zs(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===Wn?r+=4:(n=t,c===0&&I(Io)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(n=[n,i],e=n):(r=e,e=t)):(r=e,e=t),e}function qs(){let e,n,i,u;return e=r,n=a.substr(r,5),n.toLowerCase()===Jn?r+=5:(n=t,c===0&&I(go)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(n=[n,i],e=n):(r=e,e=t)):(r=e,e=t),e}function Ge(){let e,n,i,u;return e=r,n=a.substr(r,2),n.toLowerCase()===Qn?r+=2:(n=t,c===0&&I(yo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=uu()):(r=e,e=t)):(r=e,e=t),e}function Gt(){let e,n,i,u;return e=r,n=a.substr(r,2),n.toLowerCase()===Bn?r+=2:(n=t,c===0&&I(To)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=su()):(r=e,e=t)):(r=e,e=t),e}function Kt(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===Gn?r+=4:(n=t,c===0&&I(No)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=lu()):(r=e,e=t)):(r=e,e=t),e}function Hs(){let e,n,i,u;return e=r,n=a.substr(r,6),n.toLowerCase()===Kn?r+=6:(n=t,c===0&&I(Oo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=cu()):(r=e,e=t)):(r=e,e=t),e}function ve(){let e,n,i,u;return e=r,n=a.substr(r,3),n.toLowerCase()===Xn?r+=3:(n=t,c===0&&I($o)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=fu()):(r=e,e=t)):(r=e,e=t),e}function Pe(){let e,n,i,u;return e=r,n=a.substr(r,3),n.toLowerCase()===er?r+=3:(n=t,c===0&&I(So)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=du()):(r=e,e=t)):(r=e,e=t),e}function Xt(){let e,n,i,u;return e=r,n=a.substr(r,2),n.toLowerCase()===tr?r+=2:(n=t,c===0&&I(xo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=pu()):(r=e,e=t)):(r=e,e=t),e}function en(){let e,n,i,u;return e=r,n=a.substr(r,7),n.toLowerCase()===nr?r+=7:(n=t,c===0&&I(Eo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=mu()):(r=e,e=t)):(r=e,e=t),e}function Ke(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===rr?r+=4:(n=t,c===0&&I(Co)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=hu()):(r=e,e=t)):(r=e,e=t),e}function Zs(){let e,n,i,u;return e=r,n=a.substr(r,3),n.toLowerCase()===or?r+=3:(n=t,c===0&&I(Do)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=vu()):(r=e,e=t)):(r=e,e=t),e}function js(){let e,n,i,u;return e=r,n=a.substr(r,9),n.toLowerCase()===ir?r+=9:(n=t,c===0&&I(Mo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=wu()):(r=e,e=t)):(r=e,e=t),e}function tn(){let e,n,i,u;return e=r,n=a.substr(r,7),n.toLowerCase()===ar?r+=7:(n=t,c===0&&I(_o)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Iu()):(r=e,e=t)):(r=e,e=t),e}function Ys(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===ur?r+=4:(n=t,c===0&&I(bo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=gu()):(r=e,e=t)):(r=e,e=t),e}function Ws(){let e,n,i,u;return e=r,n=a.substr(r,8),n.toLowerCase()===sr?r+=8:(n=t,c===0&&I(Fo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=yu()):(r=e,e=t)):(r=e,e=t),e}function nn(){let e,n,i,u;return e=r,n=a.substr(r,9),n.toLowerCase()===lr?r+=9:(n=t,c===0&&I(Ao)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Tu()):(r=e,e=t)):(r=e,e=t),e}function rn(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===cr?r+=4:(n=t,c===0&&I(Po)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Nu()):(r=e,e=t)):(r=e,e=t),e}function on(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===fr?r+=4:(n=t,c===0&&I(Lo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ou()):(r=e,e=t)):(r=e,e=t),e}function Js(){let e,n,i,u;return e=r,n=a.substr(r,7),n.toLowerCase()===dr?r+=7:(n=t,c===0&&I(Ro)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=$u()):(r=e,e=t)):(r=e,e=t),e}function Qs(){let e,n,i,u;return e=r,n=a.substr(r,8),n.toLowerCase()===pr?r+=8:(n=t,c===0&&I(Uo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Su()):(r=e,e=t)):(r=e,e=t),e}function Bs(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===mr?r+=4:(n=t,c===0&&I(Vo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=xu()):(r=e,e=t)):(r=e,e=t),e}function Gs(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===hr?r+=4:(n=t,c===0&&I(ko)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Eu()):(r=e,e=t)):(r=e,e=t),e}function Ks(){let e,n,i,u;return e=r,n=a.substr(r,2),n.toLowerCase()===vr?r+=2:(n=t,c===0&&I(zo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Cu()):(r=e,e=t)):(r=e,e=t),e}function Xs(){let e,n,i,u;return e=r,n=a.substr(r,7),n.toLowerCase()===wr?r+=7:(n=t,c===0&&I(qo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Du()):(r=e,e=t)):(r=e,e=t),e}function el(){let e,n,i,u;return e=r,n=a.substr(r,3),n.toLowerCase()===Ir?r+=3:(n=t,c===0&&I(Ho)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Mu()):(r=e,e=t)):(r=e,e=t),e}function tl(){let e,n,i,u;return e=r,n=a.substr(r,8),n.toLowerCase()===gr?r+=8:(n=t,c===0&&I(Zo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=_u()):(r=e,e=t)):(r=e,e=t),e}function nl(){let e,n,i,u;return e=r,n=a.substr(r,5),n.toLowerCase()===yr?r+=5:(n=t,c===0&&I(jo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=bu()):(r=e,e=t)):(r=e,e=t),e}function rl(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===Tr?r+=4:(n=t,c===0&&I(Yo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Fu()):(r=e,e=t)):(r=e,e=t),e}function ol(){let e,n,i,u;return e=r,n=a.substr(r,7),n.toLowerCase()===Nr?r+=7:(n=t,c===0&&I(Wo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Au()):(r=e,e=t)):(r=e,e=t),e}function il(){let e,n,i,u;return e=r,n=a.substr(r,2),n.toLowerCase()===Or?r+=2:(n=t,c===0&&I(Jo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Pu()):(r=e,e=t)):(r=e,e=t),e}function an(){let e,n,i,u;return e=r,n=a.substr(r,8),n.toLowerCase()===$r?r+=8:(n=t,c===0&&I(Qo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Lu()):(r=e,e=t)):(r=e,e=t),e}function un(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===Sr?r+=4:(n=t,c===0&&I(Bo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ru()):(r=e,e=t)):(r=e,e=t),e}function al(){let e,n,i,u;return e=r,n=a.substr(r,13),n.toLowerCase()===xr?r+=13:(n=t,c===0&&I(Go)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Uu()):(r=e,e=t)):(r=e,e=t),e}function ul(){let e,n,i,u;return e=r,n=a.substr(r,15),n.toLowerCase()===Er?r+=15:(n=t,c===0&&I(Ko)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Vu()):(r=e,e=t)):(r=e,e=t),e}function sn(){let e,n,i,u;return e=r,n=a.substr(r,5),n.toLowerCase()===Cr?r+=5:(n=t,c===0&&I(Xo)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=ku()):(r=e,e=t)):(r=e,e=t),e}function ln(){let e,n,i,u;return e=r,n=a.substr(r,3),n.toLowerCase()===Dr?r+=3:(n=t,c===0&&I(ei)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=zu()):(r=e,e=t)):(r=e,e=t),e}function cn(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===Mr?r+=4:(n=t,c===0&&I(ti)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=qu()):(r=e,e=t)):(r=e,e=t),e}function fn(){let e,n,i,u;return e=r,n=a.substr(r,6),n.toLowerCase()===_r?r+=6:(n=t,c===0&&I(ni)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Hu()):(r=e,e=t)):(r=e,e=t),e}function le(){let e,n,i,u;return e=r,n=a.substr(r,6),n.toLowerCase()===br?r+=6:(n=t,c===0&&I(ri)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Zu()):(r=e,e=t)):(r=e,e=t),e}function sl(){let e,n,i,u;return e=r,n=a.substr(r,3),n.toLowerCase()===Fr?r+=3:(n=t,c===0&&I(oi)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=ju()):(r=e,e=t)):(r=e,e=t),e}function ll(){let e,n,i,u;return e=r,n=a.substr(r,3),n.toLowerCase()===Ar?r+=3:(n=t,c===0&&I(ii)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Yu()):(r=e,e=t)):(r=e,e=t),e}function cl(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===Pr?r+=4:(n=t,c===0&&I(ai)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Wu()):(r=e,e=t)):(r=e,e=t),e}function Le(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===Lr?r+=4:(n=t,c===0&&I(ui)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ju()):(r=e,e=t)):(r=e,e=t),e}function Re(){let e,n,i,u;return e=r,n=a.substr(r,3),n.toLowerCase()===Rr?r+=3:(n=t,c===0&&I(si)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Qu()):(r=e,e=t)):(r=e,e=t),e}function dn(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===Ur?r+=4:(n=t,c===0&&I(li)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Bu()):(r=e,e=t)):(r=e,e=t),e}function pn(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===Vr?r+=4:(n=t,c===0&&I(ci)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Gu()):(r=e,e=t)):(r=e,e=t),e}function fl(){let e,n,i,u;return e=r,n=a.substr(r,4),n.toLowerCase()===kr?r+=4:(n=t,c===0&&I(fi)),n!==t?(i=r,c++,u=S(),c--,u===t?i=void 0:(r=i,i=t),i!==t?(d=e,e=Ku()):(r=e,e=t)):(r=e,e=t),e}function oe(){let e;return a.charCodeAt(r)===44?(e=zr,r++):(e=t,c===0&&I(di)),e}function V(){let e;return a.charCodeAt(r)===40?(e=qr,r++):(e=t,c===0&&I(pi)),e}function k(){let e;return a.charCodeAt(r)===41?(e=Hr,r++):(e=t,c===0&&I(mi)),e}function m(){let e,n;for(e=[],n=mn();n!==t;)e.push(n),n=mn();return e}function mn(){let e;return e=a.charAt(r),Gr.test(e)?r++:(e=t,c===0&&I(hi)),e}function dl(){let e,n,i,u;if(e=r,n=kt(),n!==t&&(d=e,n=n),e=n,e===t)if(e=r,a.charCodeAt(r)===96?(n=vt,r++):(n=t,c===0&&I($t)),n!==t){if(i=[],u=a.charAt(r),gt.test(u)?r++:(u=t,c===0&&I(St)),u!==t)for(;u!==t;)i.push(u),u=a.charAt(r),gt.test(u)?r++:(u=t,c===0&&I(St));else i=t;i!==t?(a.charCodeAt(r)===96?(u=vt,r++):(u=t,c===0&&I($t)),u!==t?(d=e,e=Xu(i)):(r=e,e=t)):(r=e,e=t)}else r=e,e=t;return e}function pl(e,n,i){return{type:"unary-expression",location:i,operator:e,expr:n}}function hn(e,n,i,u,l){const w={type:"binary-expression",location:l,operator:e,left:n,right:i};return u!==void 0&&(w.escape=u),w}function B(e,...n){return{type:"expression-list",location:e,value:n}}function we(e,n){let i=e;for(const{op:u,expr:l,location:{end:w}}of n)i=hn(u,i,l,void 0,{...i.location,end:w});return i}function ml(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&Ze("Timestamp literal is invalid")}function hl(e){/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)!==!0&&Ze("Time literal is invalid")}function vl(e){/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)!==!0&&Ze("Date literal is invalid")}me=v();const Xe=me!==t&&r===a.length;function vn(){throw me!==t&&r<a.length&&I(ts()),rs(xe,X<a.length?es(X):null,X<a.length?Ee(X,X+1):Ee(X,X))}return o.peg$library?{peg$result:me,peg$currPos:r,peg$FAILED:t,peg$maxFailExpected:xe,peg$maxFailPos:X,peg$success:Xe,peg$throw:Xe?void 0:vn}:Xe?me:void vn()}class jc{static parse(o){return Zc(o)}}function q(a,o){if(a!=null)switch(o(a),a.type){case"when-clause":q(a.operand,o),q(a.value,o);break;case"case-expression":for(const t of a.clauses)q(t,o);a.format==="simple"&&q(a.operand,o),a.else!==null&&q(a.else,o);break;case"expression-list":for(const t of a.value)q(t,o);break;case"unary-expression":q(a.expr,o);break;case"binary-expression":q(a.left,o),q(a.right,o);break;case"function":q(a.args,o);break;case"interval":q(a.value,o),q(a.qualifier,o);break;case"interval-qualifier":q(a.start,o),q(a.end,o)}}const Yc=new Set(["current_timestamp","current_date","current_time"]);class Wc{constructor(o){this.staticData=o}makeBool(o){return Un(o)}featureValue(o,t,s,f){return Zn(o,t,s,f)}equalsNull(o){return o===null}applyLike(o,t,s){return ct(o,t,s)}ensureArray(o){return st(o)}applyIn(o,t){return lt(o,t)}currentTimestamp(o){return zn(o)}currentDate(o){return qn(o)}currentTime(o){return Hn(o)}makeSqlInterval(o,t,s){return U.createFromValueAndQualifier(o,t,s)}convertInterval(o){return U.isInterval(o)?o.valueInMilliseconds():o}compare(o,t,s){return W(t,s,o)}calculate(o,t,s,f){return Ln(o,t,s,f)}evaluateTime(o){return He(o)}evaluateTimestamp(o,t,s){return Ne(o,t,s)}evaluateDate(o,t){return dt(o,t)}evaluateFunction(o,t,s){return pt(o,t,s)}lookup(o,t){const s=t[o];return s===void 0?null:s}between(o,t){return o==null||t[0]==null||t[1]==null?null:W(o,t[0],">=")&&W(o,t[1],"<=")}notbetween(o,t){return o==null||t[0]==null||t[1]==null?null:W(o,t[0],"<")||W(o,t[1],">")}ternaryNot(o){return ze(o)}ternaryAnd(o,t){return Vn(o,t)}ternaryOr(o,t){return kn(o,t)}}function _(a,...o){return`this.${a}(${o.join(", ")})`}function z(a){return a===void 0?"void 0":JSON.stringify(a)}function Jc({type:a,start:o,end:t}){return`{type: ${z(a)}, start: ${ut(o)}, end: ${ut(t)}}`}function ut({type:a,period:o,precision:t,secondary:s}){return JSON.stringify({type:a,period:o,precision:t,secondary:s})}function Qc({type:a,size:o,withtimezone:t}){return JSON.stringify({type:a,size:o,withtimezone:t})}const On="feature",$n="lookups",Sn="attributeAdapter",xn="fieldsIndex",de="timeZone",En="currentUser";class Bc{constructor(o){this._parseTree=o,this._staticData=Object.create(null),this._nextStaticDataId=0,this._tempVars=new Set,this._nextTempVarId=0}compile(){const o=this._compileNode(this._parseTree),t=`
      ${this._tempVars.size>0?`var ${Array.from(this._tempVars).join(", ")};`:""}
      return this.convertInterval(${o});
    `;return new Function(On,$n,Sn,xn,de,En,t).bind(new Wc(this._staticData))}_storeStaticData(o){const t="static$"+this._nextStaticDataId++;return this._staticData[t]=o,t}_compileRefStaticData(o){return`this.staticData[${z(o)}]`}_generateTempVar(){const o="temp$"+this._nextTempVarId++;return this._tempVars.add(o),o}_compileSimpleCase(o){const t=this._compileNode(o.operand),s=this._generateTempVar(),f=[];for(const v of o.clauses){const y=_("compare",z("="),s,this._compileNode(v.operand)),T=this._compileNode(v.value);f.push(`${y} ? (${T}) :`)}return o.else!=null?f.push(this._compileNode(o.else)):f.push(z(null)),`(${s} = ${t}, ${f.join(" ")})`}_compileSearchedCase(o){const t=[];for(const s of o.clauses){const f=_("makeBool",this._compileNode(s.operand)),v=this._compileNode(s.value);t.push(`${f} ? (${v}) :`)}return o.else!=null?t.push(this._compileNode(o.else)):t.push(z(null)),t.join(" ")}_compileInExpr(o,t){const s=new Set,f=[];for(const T of t.value)T.type==="number"||T.type==="string"?s.add(T.value):f.push(T);const v=this._compileNode(o),y=_("ensureArray",this._compileNode({type:"expression-list",location:t.location,value:f}));if(s.size>0){const T=this._compileRefStaticData(this._storeStaticData(s)),$=this._generateTempVar();return f.length>0?`(${$} = ${v}, ${T}.has(${$}) || ${_("applyIn",$,y)})`:`(${$} = ${v}, ${$} == null ? null : ${T}.has(${$}))`}return _("applyIn",v,y)}_compileNode(o){switch(o.type){case"interval":return _("makeSqlInterval",this._compileNode(o.value),o.qualifier.type==="interval-qualifier"?Jc(o.qualifier):ut(o.qualifier),z(o.op));case"case-expression":return o.format==="simple"?this._compileSimpleCase(o):this._compileSearchedCase(o);case"parameter":return _("lookup",z(o.value.toLowerCase()),$n);case"expression-list":return`[${o.value.map(t=>this._compileNode(t)).join(", ")}]`;case"unary-expression":return _("ternaryNot",this._compileNode(o.expr));case"binary-expression":switch(o.operator){case"AND":return _("ternaryAnd",this._compileNode(o.left),this._compileNode(o.right));case"OR":return _("ternaryOr",this._compileNode(o.left),this._compileNode(o.right));case"IS":if(o.right.type!=="null")throw new h(p.UnsupportedIsRhs);return _("equalsNull",this._compileNode(o.left));case"ISNOT":if(o.right.type!=="null")throw new h(p.UnsupportedIsRhs);return`!${_("equalsNull",this._compileNode(o.left))}`;case"IN":return this._compileInExpr(o.left,o.right);case"NOT IN":return _("ternaryNot",this._compileInExpr(o.left,o.right));case"BETWEEN":return _("between",this._compileNode(o.left),this._compileNode(o.right));case"NOTBETWEEN":return _("notbetween",this._compileNode(o.left),this._compileNode(o.right));case"LIKE":return _("applyLike",this._compileNode(o.left),this._compileNode(o.right),z(o.escape));case"NOT LIKE":return _("ternaryNot",_("applyLike",this._compileNode(o.left),this._compileNode(o.right),z(o.escape)));case"<>":case"<":case">":case">=":case"<=":case"=":return _("compare",z(o.operator),this._compileNode(o.left),this._compileNode(o.right));case"*":case"-":case"+":case"/":case"||":return _("calculate",z(o.operator),this._compileNode(o.left),this._compileNode(o.right),de);default:throw new h(p.UnsupportedOperator,{operator:o.operator})}case"null":case"boolean":case"string":case"number":return z(o.value);case"time":try{return this._compileRefStaticData(this._storeStaticData(He(o.value)))}catch{return _("evaluateTime",z(o.value))}case"date":try{return this._compileRefStaticData(this._storeStaticData(dt(o.value,"unknown")))}catch{return _("evaluateDate",z(o.value),z("unknown"))}case"timestamp":try{return this._compileRefStaticData(this._storeStaticData(Ne(o.value,"unknown")))}catch{return _("evaluateTimestamp",z(o.value),z("unknown"))}case"current-time":return o.mode==="date"?_("currentDate",de):o.mode==="time"?_("currentTime",de):_("currentTimestamp",de);case"current-user":return En;case"column-reference":return _("featureValue",On,z(o.column),xn,Sn);case"data-type":return Qc(o.value);case"function":return _("evaluateFunction",z(o.name),this._compileNode(o.args),de)}throw new h(p.UnsupportedSyntax,{node:o.type})}}class Rn{static create(o,t={}){return new Rn(o,t.fieldsIndex,t.timeZone??void 0,t.currentUser)}constructor(o,t,s="UTC",f=null){this.fieldsIndex=t,this.timeZone=s,this.currentUser=f,this.parameters={},this._compiledExecutor=null,this._hasDateFunctions=void 0,this.parseTree=jc.parse(o);const{isStandardized:v,isAggregate:y,currentUserRequired:T,referencedFieldNames:$}=this._extractExpressionInfo(t);this._referencedFieldNames=$,this.isStandardized=v,this.isAggregate=y,this.currentUserRequired=T}static convertValueToStorageFormat(o,t=null){if(t===null)return G(o)?o.getTime():F(o)?o.toMillis():P(o)?o.toStorageFormat():L(o)?o.toStorageString():A(o)?o.toStorageFormat():o;switch(t){case"date":return G(o)?o.getTime():F(o)?o.toMillis():P(o)?o.toMilliseconds():A(o)?o.toNumber():o;case"date-only":return G(o)?K.fromDateJS(o).toString():P(o)?K.fromSqlTimeStampOffset(o).toString():F(o)?K.fromDateTime(o).toString():o;case"time-only":return G(o)?J.fromDateJS(o).toStorageString():F(o)?J.fromDateTime(o).toStorageString():P(o)?J.fromSqlTimeStampOffset(o).toStorageString():L(o)?o.toStorageString():o;case"timestamp-offset":if(G(o))return te.fromJSDate(o).toStorageFormat();if(F(o))return te.fromDateTime(o).toStorageFormat();if(P(o))return o.toStorageFormat()}return o}get fieldNames(){return this._referencedFieldNames}testSet(o,t=Te,s=this.currentUser){return!!this._evaluateNode(this.parseTree,null,t,o,s)}calculateValue(o,t=Te,s=this.currentUser){const f=this._evaluateNode(this.parseTree,o,t,null,s);return U.isInterval(f)?f.valueInMilliseconds()/864e5:f}tryGetCompiledExecutor(){if(this._compiledExecutor!=null)return this._compiledExecutor;if(Tl("esri-csp-restrictions"))return null;const o=new Bc(this.parseTree);return this._compiledExecutor=o.compile(),this._compiledExecutor}calculateValueCompiled(o,t=Te,s=this.currentUser){const f=this.tryGetCompiledExecutor();return f==null?this.calculateValue(o,t):f(o,this.parameters,t,this.fieldsIndex,this.timeZone,s??null)}testFeature(o,t=Te,s=this.currentUser){return!!this._evaluateNode(this.parseTree,o,t,null,s)}testFeatureCompiled(o,t=Te,s=this.currentUser){const f=this.tryGetCompiledExecutor();return f==null?this.testFeature(o,t):!!f(o,this.parameters,t,this.fieldsIndex,this.timeZone,s??null)}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,q(this.parseTree,o=>{o.type==="current-time"?this._hasDateFunctions=!0:o.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||Yc.has(o.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const o=new Set;return q(this.parseTree,t=>{t.type==="function"&&o.add(t.name.toLowerCase())}),Array.from(o)}getExpressions(){const o=new Map;return q(this.parseTree,t=>{if(t.type==="function"){const s=t.name.toLowerCase(),f=t.args.value[0];if(f.type==="column-reference"){const v=f.column,y=`${s}-${v}`;o.has(y)||o.set(y,{aggregateType:s,field:v})}}}),[...o.values()]}getVariables(){const o=new Set;return q(this.parseTree,t=>{t.type==="parameter"&&o.add(t.value.toLowerCase())}),Array.from(o)}_extractExpressionInfo(o){const t=[],s=new Set;let f=!0,v=!1,y=!1;return q(this.parseTree,T=>{switch(T.type){case"column-reference":{const $=o?.get(T.column);let b,D;$?b=D=$.name??"":(D=T.column,b=D.toLowerCase()),s.has(b)||(s.add(b),t.push(D)),T.column=D;break}case"current-user":y=!0;break;case"function":{const{name:$,args:b}=T,D=b.value.length;f&&(f=Yl($,D)),v===!1&&(v=gn($,D));break}}}),{referencedFieldNames:Array.from(t),isStandardized:f,isAggregate:v,currentUserRequired:y}}_evaluateNode(o,t,s,f,v){let y;switch(o.type){case"interval":{const T=this._evaluateNode(o.value,t,s,f,v);return U.createFromValueAndQualifier(T,o.qualifier,o.op)}case"case-expression":if(o.format==="simple"){const T=this._evaluateNode(o.operand,t,s,f,v);for(let $=0;$<o.clauses.length;$++)if(W(T,this._evaluateNode(o.clauses[$].operand,t,s,f,v),"="))return this._evaluateNode(o.clauses[$].value,t,s,f,v);if(o.else!==null)return this._evaluateNode(o.else,t,s,f,v)}else{for(let T=0;T<o.clauses.length;T++)if(Un(this._evaluateNode(o.clauses[T].operand,t,s,f,v)))return this._evaluateNode(o.clauses[T].value,t,s,f,v);if(o.else!==null)return this._evaluateNode(o.else,t,s,f,v)}return null;case"parameter":return y=this.parameters[o.value.toLowerCase()],G(y)?R.fromJSDate(y):y!=null&&typeof y=="object"&&"toDateTime"in y?y.toDateTime():y;case"expression-list":{const T=[];for(const $ of o.value)T.push(this._evaluateNode($,t,s,f,v));return T}case"unary-expression":return ze(this._evaluateNode(o.expr,t,s,f,v));case"binary-expression":switch(o.operator){case"AND":return Vn(this._evaluateNode(o.left,t,s,f,v),this._evaluateNode(o.right,t,s,f,v));case"OR":return kn(this._evaluateNode(o.left,t,s,f,v),this._evaluateNode(o.right,t,s,f,v));case"IS":if(o.right.type!=="null")throw new h(p.UnsupportedIsRhs);return this._evaluateNode(o.left,t,s,f,v)===null;case"ISNOT":if(o.right.type!=="null")throw new h(p.UnsupportedIsRhs);return this._evaluateNode(o.left,t,s,f,v)!==null;case"IN":{const T=st(this._evaluateNode(o.right,t,s,f,v));return lt(this._evaluateNode(o.left,t,s,f,v),T)}case"NOT IN":{const T=st(this._evaluateNode(o.right,t,s,f,v));return ze(lt(this._evaluateNode(o.left,t,s,f,v),T))}case"BETWEEN":{const T=this._evaluateNode(o.left,t,s,f,v),$=this._evaluateNode(o.right,t,s,f,v);return T==null||$[0]==null||$[1]==null?null:W(T,$[0],">=")&&W(T,$[1],"<=")}case"NOTBETWEEN":{const T=this._evaluateNode(o.left,t,s,f,v),$=this._evaluateNode(o.right,t,s,f,v);return T==null||$[0]==null||$[1]==null?null:W(T,$[0],"<")||W(T,$[1],">")}case"LIKE":return ct(this._evaluateNode(o.left,t,s,f,v),this._evaluateNode(o.right,t,s,f,v),o.escape);case"NOT LIKE":return ze(ct(this._evaluateNode(o.left,t,s,f,v),this._evaluateNode(o.right,t,s,f,v),o.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return W(this._evaluateNode(o.left,t,s,f,v),this._evaluateNode(o.right,t,s,f,v),o.operator);case"-":case"+":case"*":case"/":case"||":return Ln(o.operator,this._evaluateNode(o.left,t,s,f,v),this._evaluateNode(o.right,t,s,f,v),this.timeZone)}case"null":case"boolean":case"string":case"number":return o.value;case"date":return o.parsedValue??(o.parsedValue=dt(o.value,"unknown")),o.parsedValue;case"timestamp":return o.parsedValue??(o.parsedValue=Ne(o.value,"unknown")),o.parsedValue;case"time":return He(o.value);case"current-time":return o.mode==="date"?qn(this.timeZone):o.mode==="time"?Hn(this.timeZone):zn(this.timeZone);case"current-user":return v??null;case"column-reference":return Zn(t,o.column,this.fieldsIndex,s);case"data-type":return o.value;case"function":{if(this.isAggregate&&gn(o.name,o.args.value.length)){const $=[];for(const b of o.args?.value||[]){const D=[];for(const Z of f||[])D.push(this._evaluateNode(b,Z,s,null,v));$.push(D)}return $l(o.name,$)}const T=this._evaluateNode(o.args,t,s,f,v);return pt(o.name,T,this.timeZone)}}throw new h(p.UnsupportedSyntax,{node:o.type})}}function Un(a){return a===!0}function st(a){return Array.isArray(a)?a:[a]}function ze(a){return a!==null?a!==!0:null}function Vn(a,o){return a!=null&&o!=null?a===!0&&o===!0:a!==!1&&o!==!1&&null}function kn(a,o){return a!=null&&o!=null?a===!0||o===!0:a===!0||o===!0||null}function lt(a,o){if(a==null)return null;let t=!1;for(const s of o)if(s==null)t=null;else{if(a===s){t=!0;break}if(at(a)&&at(s)&&(t=W(a,s,"="),t))break}return t}function zn(a){return qe(new Date,a)}function qn(a){return K.fromNow(a)}function Hn(a){const o=qe(new Date,a);return J.fromDateTime(o)}const Cn="-[]/{}()*+?.\\^$|";var ce;function Gc(a,o){const t=o;let s="",f=ce.Normal;for(let v=0;v<a.length;v++){const y=a.charAt(v);switch(f){case ce.Normal:y===t?f=ce.Escaped:Cn.includes(y)?s+="\\"+y:s+=y==="%"?".*":y==="_"?".":y;break;case ce.Escaped:Cn.includes(y)?s+="\\"+y:s+=y,f=ce.Normal}}return new RegExp("^"+s+"$","m")}function ct(a,o,t){return a==null?null:Gc(o,t).test(a)}function Kc(a){return a&&typeof a.attributes=="object"}function Zn(a,o,t,s){if("getAttributeSQL"in s)return s.getAttributeSQL(a,o);const f=s.getAttribute(a,o);if(f==null)return f;const v=t?.get(o);switch(v?.type){case"esriFieldTypeDate":case"date":return qe(new Date(f),t?.getLuxonTimeZone(v.name)??Nl.utcInstance);case"esriFieldTypeDateOnly":case"date-only":return K.fromReader(f);case"esriFieldTypeTimeOnly":case"time-only":return J.fromReader(f);case"esriFieldTypeTimestampOffset":case"timestamp-offset":return new te(f)}return f}(function(a){a[a.Normal=0]="Normal",a[a.Escaped=1]="Escaped"})(ce||(ce={}));const Te={getAttribute:(a,o)=>(Kc(a)?a.attributes:a)[o]};export{Rn as R,p as a,te as i,h as n,$l as u};
