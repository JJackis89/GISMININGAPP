import{_ as c,aL as d,dL as m,H as f,bl as p,p as w}from"./index-8ee34b61.js";let i=null,u=!0;function T(n,a,t,e){if(!a||!t)throw new Error("Cannot construct image data without dimensions");if(u)try{return new ImageData(n,a,t)}catch{u=!1}const r=g(a,t,e);return r.data.set(n,0),r}function y(){return i||(i=document.createElement("canvas"),i.width=1,i.height=1),i}function g(n,a,t){return t||(t=y()),t.getContext("2d").createImageData(n,a)}async function _(n,a){const t=window.URL.createObjectURL(n);try{const{data:e}=await f(t,{...a,responseType:"image"});return e}catch(e){throw p(e)?e:new w("invalid-image",`Could not fetch requested image at ${t}`)}finally{window.URL.revokeObjectURL(t)}}async function L(n,a){const{arrayBuffer:t,mediaType:e}=await l(n,a),r=e==="image/png";if(e==="image/gif"){const{isAnimatedGIF:o,parseGif:s}=await c(()=>import("./gif-3e4d26d3.js"),["assets/gif-3e4d26d3.js","assets/index-8ee34b61.js","assets/index-a5714ce2.css"]);if(o(t))return s(t,a)}if(r){const{isAnimatedPNG:o,parseApng:s}=await c(()=>import("./apng-1d3b037b.js"),["assets/apng-1d3b037b.js","assets/_commonjsHelpers-b09fa337.js","assets/index-8ee34b61.js","assets/index-a5714ce2.css"]);if(o(t))return s(t,a)}return _(new Blob([t],{type:e}),a)}async function l(n,a){const t=d(n);if(t?.isBase64)return{arrayBuffer:m(t.data),mediaType:t.mediaType};const e=await f(n,{responseType:"array-buffer",...a});return{arrayBuffer:e.data,mediaType:e.getHeader?.("Content-Type")??""}}export{T as c,L as p};
