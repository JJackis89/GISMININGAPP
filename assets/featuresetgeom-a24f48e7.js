import{dV as l,dW as c,e6 as d}from"./index-f00bd99f.js";import{D as O,c as J,H as s,p as m,K as u}from"./aiServices-6ea2feb8.js";import{u as p,l as w}from"./SpatialFilter-2d74c55a.js";import{a}from"./operatorsWorkerConnection-a3ef878e.js";import"./number-45d97d9b.js";import"./commonProperties-da958896.js";import"./arcadeUtils-dbe8d533.js";import"./featureConversionUtils-f7ab006d.js";import"./OptimizedFeature-a0a9dac6.js";import"./memoryEstimations-368c31a0.js";import"./OptimizedFeatureSet-5dc8ee29.js";import"./WhereClause-6167c62b.js";import"./unitConversion-bc219878.js";function o(i){return async(n,r,t)=>{if(J(t,2,2,n,r),(t=O(t))[0]===null&&t[1]===null)return!1;if(u(t[0])){if(s(t[1]))return new w({parentfeatureset:t[0],relation:i,relationGeom:t[1]});if(t[1]===null)return new p({parentfeatureset:t[0]});throw new l(n,c.InvalidParameter,r)}if(s(t[0])){if(s(t[1])){switch(i){case"esriSpatialRelEnvelopeIntersects":{const f=d(t[0]),e=d(t[1]);return f!=null&&e!=null&&a("intersects",[f.toJSON(),e.toJSON()])}case"esriSpatialRelIntersects":return a("intersects",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelContains":return a("contains",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelOverlaps":return a("overlaps",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelWithin":return a("within",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelTouches":return a("touches",[t[0].toJSON(),t[1].toJSON()]);case"esriSpatialRelCrosses":return a("crosses",[t[0].toJSON(),t[1].toJSON()])}throw new l(n,c.InvalidParameter,r)}if(u(t[1]))return new w({parentfeatureset:t[1],relation:i,relationGeom:t[0]});if(t[1]===null)return!1;throw new l(n,c.InvalidParameter,r)}if(t[0]===null){if(u(t[1]))return new p({parentfeatureset:t[1]});if(s(t[1])||t[1]===null)return!1}throw new l(n,c.InvalidParameter,r)}}function E(i){i.mode==="async"&&(i.functions.intersects=function(n,r){return i.standardFunctionAsync(n,r,o("esriSpatialRelIntersects"))},i.functions.envelopeintersects=function(n,r){return i.standardFunctionAsync(n,r,o("esriSpatialRelEnvelopeIntersects"))},i.signatures.push({name:"envelopeintersects",min:2,max:2}),i.functions.contains=function(n,r){return i.standardFunctionAsync(n,r,o("esriSpatialRelContains"))},i.functions.overlaps=function(n,r){return i.standardFunctionAsync(n,r,o("esriSpatialRelOverlaps"))},i.functions.within=function(n,r){return i.standardFunctionAsync(n,r,o("esriSpatialRelWithin"))},i.functions.touches=function(n,r){return i.standardFunctionAsync(n,r,o("esriSpatialRelTouches"))},i.functions.crosses=function(n,r){return i.standardFunctionAsync(n,r,o("esriSpatialRelCrosses"))},i.functions.relate=function(n,r){return i.standardFunctionAsync(n,r,async(t,f,e)=>{if(e=O(e),J(e,3,3,n,r),s(e[0])&&s(e[1]))return a("relate",[e[0].toJSON(),e[1].toJSON(),m(e[2])]);if(s(e[0])&&e[1]===null||s(e[1])&&e[0]===null)return!1;if(u(e[0])&&e[1]===null)return new p({parentfeatureset:e[0]});if(u(e[1])&&e[0]===null)return new p({parentfeatureset:e[1]});if(u(e[0])&&s(e[1]))return e[0].relate(e[1],m(e[2]));if(u(e[1])&&s(e[0]))return e[1].relate(e[0],m(e[2]));if(e[0]===null&&e[1]===null)return!1;throw new l(n,c.InvalidParameter,r)})})}export{E as registerFunctions};
